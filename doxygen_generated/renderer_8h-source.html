<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>renderer.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>renderer.h</h1><a href="renderer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*        Copyright (C) 2000,2001,2002  Sony Computer Entertainment America</font>
00002           
00003           This file is subject to the terms and conditions of the GNU Lesser
00004           General Public License Version 2.1. See the file "COPYING" in the
00005           main directory of this archive for more details.                             */
00006 
00007 <font class="preprocessor">#ifndef renderer_h</font>
00008 <font class="preprocessor">#define renderer_h</font>
00009 
00010 <font class="preprocessor">#include "ps2s/packet.h"</font>
00011 
00012 <font class="preprocessor">#include "<a class="code" href="gl_8h.html">GL/gl.h</a>"</font>
00013 
00014 <font class="comment">/********************************************</font>
00015  * flags describing what pieces of microcode can do/
00016  * need to do
00017  */
00018 
<a name="l00019"></a><a class="code" href="classCRendererProps.html">00019</a> <font class="keyword">class </font><a class="code" href="classCRendererProps.html">CRendererProps</a> {
00020    <font class="keyword">public</font>:
<a name="l00021"></a><a class="code" href="classCRendererProps.html#m0">00021</a>       tU64 PrimType             : 3;
<a name="l00022"></a><a class="code" href="classCRendererProps.html#m1">00022</a>       tU64 Lighting             : 1;
<a name="l00023"></a><a class="code" href="classCRendererProps.html#m2">00023</a>       tU64 NumDirLights         : 2;
<a name="l00024"></a><a class="code" href="classCRendererProps.html#m3">00024</a>       tU64 NumPtLights          : 3;
<a name="l00025"></a><a class="code" href="classCRendererProps.html#m4">00025</a>       tU64 Texture              : 1;
<a name="l00026"></a><a class="code" href="classCRendererProps.html#m5">00026</a>       tU64 Specular             : 1;
<a name="l00027"></a><a class="code" href="classCRendererProps.html#m6">00027</a>       tU64 PerVtxMaterial       : 3;
<a name="l00028"></a><a class="code" href="classCRendererProps.html#m7">00028</a>       tU64 Clipping             : 2;
<a name="l00029"></a><a class="code" href="classCRendererProps.html#m8">00029</a>       tU64 CullFace             : 1;
<a name="l00030"></a><a class="code" href="classCRendererProps.html#m9">00030</a>       tU64 TwoSidedLighting     : 1;
<a name="l00031"></a><a class="code" href="classCRendererProps.html#m10">00031</a>       tU64 ArrayAccess          : 2;
00032 
<a name="l00033"></a><a class="code" href="classCRendererProps.html#m11">00033</a>       tU64 unused               : 12;
00034 
<a name="l00035"></a><a class="code" href="classCRendererProps.html#m12">00035</a>       tU64 UserProps            : 32;
00036 
00037       <font class="comment">// convert to unsigned 64-bit value</font>
00038 
<a name="l00039"></a><a class="code" href="classCRendererProps.html#a0">00039</a>       <font class="keyword">inline</font> <a class="code" href="classCRendererProps.html#a0">operator tU64</a>()<font class="keyword"> const </font>{
00040          <font class="comment">// this hack doesn't work on linux since the compiler thinks this is a 32-bit</font>
00041          <font class="comment">// machine..</font>
00042          <font class="comment">// asm (" ### CRendererProps to uint ### " : "=r" (value) : "0" (*this) );</font>
00043 
00044          tU64 *value = (tU64*)<font class="keyword">this</font>;
00045          <font class="keywordflow">return</font> *value;
00046       }
00047 
<a name="l00048"></a><a class="code" href="classCRendererProps.html#a1">00048</a>       <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classCRendererProps.html#a1">operator = </a>( tU64 value )<font class="keyword"> </font>{
00049          <font class="comment">// see above..</font>
00050          <font class="comment">// asm(" ### CRendererProps assign from u64 ### " : "=r" (*(tU64*)this) : "0" (value) );</font>
00051 
00052          *<font class="keyword">this</font> = *(<a class="code" href="classCRendererProps.html">CRendererProps</a>*)&amp;value;
00053       }
00054 } __attribute__ (( <a class="code" href="renderer_8h.html#a0">aligned</a>(8) ));
00055 
<a name="l00056"></a><a class="code" href="namespaceRendererProps.html">00056</a> <font class="keyword">namespace </font>RendererProps {
<a name="l00057"></a><a class="code" href="namespaceRendererProps.html#a15">00057</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>   = 1 &lt;&lt; 0,
00058                   <a class="code" href="namespaceRendererProps.html#a15a1">kTriangles</a>            = 1 &lt;&lt; 1,
00059                   <a class="code" href="namespaceRendererProps.html#a15a2">kQuads</a>                = 1 &lt;&lt; 2 } <a class="code" href="namespaceRendererProps.html#a15">tPrimType</a>;
00060 
<a name="l00061"></a><a class="code" href="namespaceRendererProps.html#a16">00061</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a>           = 1 &lt;&lt; 0,
00062                   <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>           = 1 &lt;&lt; 1 } <a class="code" href="namespaceRendererProps.html#a16">tNumDirLights</a>;
00063 
<a name="l00064"></a><a class="code" href="namespaceRendererProps.html#a17">00064</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a>             = 1 &lt;&lt; 0,
00065                   <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a>            = 1 &lt;&lt; 1,
00066                   <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>            = 1 &lt;&lt; 2 } <a class="code" href="namespaceRendererProps.html#a17">tNumPtLights</a>;
00067 
<a name="l00068"></a><a class="code" href="namespaceRendererProps.html#a18">00068</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>           = 1 &lt;&lt; 0,
00069                   <a class="code" href="namespaceRendererProps.html#a18a9">kDiffuse</a>              = 1 &lt;&lt; 1,
00070                   <a class="code" href="namespaceRendererProps.html#a18a10">kSpecular</a>             = 1 &lt;&lt; 2 } <a class="code" href="namespaceRendererProps.html#a18">tPerVtxMaterial</a>;
00071 
<a name="l00072"></a><a class="code" href="namespaceRendererProps.html#a19">00072</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { kLinear               = 1 &lt;&lt; 0,
00073                   kIndexed              = 1 &lt;&lt; 1 } <a class="code" href="namespaceRendererProps.html#a19">tArrayAccess</a>;
00074 
<a name="l00075"></a><a class="code" href="namespaceRendererProps.html#a20">00075</a>    <font class="keyword">typedef</font> <font class="keyword">enum</font> { <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a>           = 1 &lt;&lt; 0,
00076                   <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>              = 1 &lt;&lt; 1 } <a class="code" href="namespaceRendererProps.html#a20">tClipping</a>;
00077 }      
00078 
00079 <font class="keyword">class </font><a class="code" href="classCGeometryBlock.html">CGeometryBlock</a>;
00080 <font class="keyword">class </font><a class="code" href="classCVertArray.html">CVertArray</a>;
00081 
<a name="l00087"></a><a class="code" href="classCRenderer.html">00087</a> <font class="keyword">class </font><a class="code" href="classCRenderer.html">CRenderer</a> {
00088    <font class="keyword">protected</font>:
<a name="l00089"></a><a class="code" href="classCRenderer.html#n0">00089</a>       tU64      Capabilities;
<a name="l00090"></a><a class="code" href="classCRenderer.html#n1">00090</a>       tU64      Requirements;
00091 
00092       <font class="comment">// this class can't be instantiated</font>
<a name="l00093"></a><a class="code" href="classCRenderer.html#b0">00093</a>       <a class="code" href="classCRenderer.html#b0">CRenderer</a>()<font class="keyword"> </font>{ }
<a name="l00094"></a><a class="code" href="classCRenderer.html#b1">00094</a>       <a class="code" href="classCRenderer.html#b0">CRenderer</a>( tU64 caps, tU64 reqs ) : Capabilities(caps), Requirements(reqs) {}
00095 
<a name="l00096"></a><a class="code" href="classCRenderer.html#b2">00096</a>       <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#b2">SetCapabilities</a>( tU64 caps )<font class="keyword"> </font>{ Capabilities = caps; }
<a name="l00097"></a><a class="code" href="classCRenderer.html#b3">00097</a>       <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#b3">SetRequirements</a>( tU64 reqs )<font class="keyword"> </font>{ Requirements = reqs; }
00098 
00099    <font class="keyword">public</font>:
<a name="l00100"></a><a class="code" href="classCRenderer.html#a0">00100</a>       <font class="keyword">virtual</font> tU64 <a class="code" href="classCRenderer.html#a0">GetCapabilities</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Capabilities; }
<a name="l00101"></a><a class="code" href="classCRenderer.html#a1">00101</a>       <font class="keyword">virtual</font> tU64 <a class="code" href="classCRenderer.html#a1">GetRequirements</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Requirements; }
00102 
00113       <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#a2">InitContext</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType, tU32 rcChanges, <font class="keywordtype">bool</font> userRcChanged ) = 0;
00114 
00116       <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#a3">Load</a>() = 0;
00117 
<a name="l00119"></a><a class="code" href="classCRenderer.html#a4">00119</a>       <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#a4">DrawLinearArrays</a>( <a class="code" href="classCGeometryBlock.html">CGeometryBlock</a> &amp;block )<font class="keyword"></font>
00120       { mError( <font class="stringliteral">"This renderer doesn't do linear arrays"</font> ); }
<a name="l00122"></a><a class="code" href="classCRenderer.html#a5">00122</a>       <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classCRenderer.html#a5">DrawIndexedArrays</a>( <a class="code" href="classCGeometryBlock.html">CGeometryBlock</a> &amp;block )<font class="keyword"></font>
00123       { mError( <font class="stringliteral">"This renderer doesn't do indexed arrays"</font> ); }
00124 
00129       <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="classCRenderer.html#a6">GetCachePackets</a>( <font class="keyword">const</font> <a class="code" href="classCGeometryBlock.html">CGeometryBlock</a> &amp;geometry ) = 0;
00130 
00142       <font class="keyword">virtual</font> <a class="code" href="classCRendererProps.html">CRendererProps</a> <a class="code" href="classCRenderer.html#a7">GetRenderContextDeps</a>() = 0;
00143 
00146       <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="classCRenderer.html#a8">GetPacketQwordSize</a>( <font class="keyword">const</font> <a class="code" href="classCGeometryBlock.html">CGeometryBlock</a> &amp;geometry ) = 0;
00147 
00149       <font class="keyword">virtual</font> <font class="keyword">const</font> <font class="keywordtype">char</font>* <a class="code" href="classCRenderer.html#a9">GetName</a>() = 0;
00150 };
00151 
00152 #endif <font class="comment">// renderer_h</font>
</pre></div><hr><address><small>ps2gl version cvs</small></address>
