<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gmanager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>gmanager.cpp</h1><a href="gmanager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*        Copyright (C) 2000,2001,2002  Sony Computer Entertainment America</font>
00002           
00003           This file is subject to the terms and conditions of the GNU Lesser
00004           General Public License Version 2.1. See the file "COPYING" in the
00005           main directory of this archive for more details.                             */
00006 
00007 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00008 
00009 <font class="preprocessor">#include "<a class="code" href="ps2gl_8h.html">GL/ps2gl.h</a>"</font>
00010 
00011 <font class="preprocessor">#include "ps2s/packet.h"</font>
00012 <font class="preprocessor">#include "ps2s/cpu_matrix.h"</font>
00013 <font class="preprocessor">#include "ps2s/math.h"</font>
00014 <font class="preprocessor">#include "ps2s/displayenv.h"</font>
00015 
00016 <font class="preprocessor">#include "<a class="code" href="gmanager_8h.html">ps2gl/gmanager.h</a>"</font>
00017 <font class="preprocessor">#include "<a class="code" href="glcontext_8h.html">ps2gl/glcontext.h</a>"</font>
00018 <font class="preprocessor">#include "<a class="code" href="dlist_8h.html">ps2gl/dlist.h</a>"</font>
00019 <font class="preprocessor">#include "<a class="code" href="clear_8h.html">ps2gl/clear.h</a>"</font>
00020 <font class="preprocessor">#include "<a class="code" href="matrix_8h.html">ps2gl/matrix.h</a>"</font>
00021 <font class="preprocessor">#include "<a class="code" href="debug_8h.html">ps2gl/debug.h</a>"</font>
00022 
00023 
00024 <font class="comment">/********************************************</font>
00025  * class CVertArray
00026  */
00027 
<a name="l00028"></a><a class="code" href="classCVertArray.html#a0">00028</a> <a class="code" href="classCVertArray.html#a0">CVertArray::CVertArray</a>()<font class="keyword"></font>
00029 {
00030    Vertices = Normals = TexCoords = Colors = NULL;
00031    VerticesAreValid = NormalsAreValid = TexCoordsAreValid = ColorsAreValid = <font class="keyword">false</font>;
00032    WordsPerVertex = WordsPerTexCoord = WordsPerColor = 0;
00033    WordsPerNormal = 3; <font class="comment">// not set by NormalPointer</font>
00034 }
00035 
00036 <font class="comment">/********************************************</font>
00037  * class CGeomManager
00038  */
00039 
00040 <font class="comment">// static members</font>
00041 
<a name="l00042"></a><a class="code" href="classCGeomManager.html#q0">00042</a> <a class="code" href="classCVertArray.html">CVertArray</a>      *CGeomManager::VertArray;
00043 
<a name="l00044"></a><a class="code" href="classCGeomManager.html#q2">00044</a> <a class="code" href="structtUserPrimEntry.html">tUserPrimEntry</a>  CGeomManager::UserPrimTypes[kMaxUserPrimTypes];
00045 
<a name="l00046"></a><a class="code" href="classCGeomManager.html#q3">00046</a> <font class="keywordtype">bool</font>            CGeomManager::DoNormalize = <font class="keyword">false</font>;
00047 
<a name="l00048"></a><a class="code" href="classCGeomManager.html#a0">00048</a> <a class="code" href="classCGeomManager.html#a0">CGeomManager::CGeomManager</a>( <a class="code" href="classCGLContext.html">CGLContext</a> &amp;context )
00049    : GLContext(context),
00050      CurNormal(0.0f, 0.0f, 0.0f),
00051      Prim(<a class="code" href="gl_8h.html#a513">GL_INVALID_VALUE</a>),
00052      InsideBeginEnd(false),
00053      LastArrayAccessWasIndexed(false), LastArrayAccessIsValid(false),
00054      UserRenderContextChanged(false)
00055 {
00056    <font class="keywordflow">for</font> ( <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> i = 0; i &lt; kMaxUserPrimTypes; i++ )
00057       UserPrimTypes[i].<a class="code" href="structtUserPrimEntry.html#m0">requirements</a> = 0xffffffff;
00058 }
00059 
00060 <font class="comment">/********************************************</font>
00061  * gl api
00062  */
00063 
<a name="l00082"></a><a class="code" href="group__gl__api.html#a918">00082</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a918">glVertexPointer</a>( <a class="code" href="gl_8h.html#a693">GLint</a> size, <a class="code" href="gl_8h.html#a687">GLenum</a> type,
00083                       <a class="code" href="gl_8h.html#a697">GLsizei</a> stride, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *ptr )<font class="keyword"></font>
00084 {
00085    <font class="keywordflow">if</font> ( stride != 0 ) {
00086       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"stride must be 0"</font> );
00087       <font class="keywordflow">return</font>;
00088    }
00089    <font class="keywordflow">if</font> ( type != <a class="code" href="gl_8h.html#a9">GL_FLOAT</a> ) {
00090       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"type must be float"</font> );
00091       <font class="keywordflow">return</font>;
00092    }
00093    
00094    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = pGLContext-&gt;GetGeomManager().GetVertArray();
00095    vertArray.<a class="code" href="classCVertArray.html#a13">SetVertices</a>( (<font class="keywordtype">void</font>*)ptr );
00096    vertArray.<a class="code" href="classCVertArray.html#a21">SetWordsPerVertex</a>( size );
00097 }
00098 
<a name="l00104"></a><a class="code" href="group__gl__api.html#a919">00104</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a919">glNormalPointer</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> type, <a class="code" href="gl_8h.html#a697">GLsizei</a> stride,
00105                       <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *ptr )<font class="keyword"></font>
00106 {
00107    <a class="code" href="ps2gl_8h.html#a41">pglNormalPointer</a>( 3, type, stride, ptr );
00108 }
00109 
<a name="l00116"></a><a class="code" href="group__gl__api.html#a922">00116</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a922">glTexCoordPointer</a>( <a class="code" href="gl_8h.html#a693">GLint</a> size, <a class="code" href="gl_8h.html#a687">GLenum</a> type,
00117                         <a class="code" href="gl_8h.html#a697">GLsizei</a> stride, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *ptr )<font class="keyword"></font>
00118 {
00119    <font class="keywordflow">if</font> ( stride != 0 ) {
00120       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"stride must be 0"</font> );
00121       <font class="keywordflow">return</font>;
00122    }
00123    <font class="keywordflow">if</font> ( type != <a class="code" href="gl_8h.html#a9">GL_FLOAT</a> ) {
00124       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"type must be float"</font> );
00125       <font class="keywordflow">return</font>;
00126    }
00127    
00128    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = pGLContext-&gt;GetGeomManager().GetVertArray();
00129    vertArray.<a class="code" href="classCVertArray.html#a15">SetTexCoords</a>( (<font class="keywordtype">void</font>*)ptr );
00130    vertArray.<a class="code" href="classCVertArray.html#a23">SetWordsPerTexCoord</a>( size );
00131 }
00132 
<a name="l00139"></a><a class="code" href="group__gl__api.html#a920">00139</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a920">glColorPointer</a>( <a class="code" href="gl_8h.html#a693">GLint</a> size, <a class="code" href="gl_8h.html#a687">GLenum</a> type,
00140                      <a class="code" href="gl_8h.html#a697">GLsizei</a> stride, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *ptr )<font class="keyword"></font>
00141 {
00142    <font class="keywordflow">if</font> ( stride != 0 ) {
00143       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"stride must be 0"</font> );
00144       <font class="keywordflow">return</font>;
00145    }
00146    <font class="keywordflow">if</font> ( type != <a class="code" href="gl_8h.html#a9">GL_FLOAT</a> ) {
00147       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"type must be float"</font> );
00148       <font class="keywordflow">return</font>;
00149    }
00150    
00151    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = pGLContext-&gt;GetGeomManager().GetVertArray();
00152    vertArray.<a class="code" href="classCVertArray.html#a16">SetColors</a>( (<font class="keywordtype">void</font>*)ptr );
00153    vertArray.<a class="code" href="classCVertArray.html#a24">SetWordsPerColor</a>( size );
00154 }
00155 
<a name="l00167"></a><a class="code" href="group__gl__api.html#a926">00167</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a926">glDrawArrays</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> mode, <a class="code" href="gl_8h.html#a693">GLint</a> first, <a class="code" href="gl_8h.html#a697">GLsizei</a> count )<font class="keyword"></font>
00168 {
00169    <a class="code" href="classCGeomManager.html">CGeomManager</a>&amp; gmanager = pGLContext-&gt;GetGeomManager();
00170    gmanager.<a class="code" href="classCGeomManager.html#a16">DrawArrays</a>( mode, first, count );
00171 }
00172 
<a name="l00176"></a><a class="code" href="group__gl__api.html#a927">00176</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a927">glDrawElements</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> mode, <a class="code" href="gl_8h.html#a697">GLsizei</a> count, <a class="code" href="gl_8h.html#a687">GLenum</a> type, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *indices )<font class="keyword"></font>
00177 {
00178    mError(<font class="stringliteral">"glDrawElements is a placeholder ATM and should not be called"</font>);
00179 }
00180 
<a name="l00184"></a><a class="code" href="group__gl__api.html#a928">00184</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a928">glInterleavedArrays</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> format, <a class="code" href="gl_8h.html#a697">GLsizei</a> stride, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *pointer )<font class="keyword"></font>
00185 {
00186    mError(<font class="stringliteral">"glInterleavedArrays is a placeholder ATM and should not be called"</font>);
00187 }
00188 
<a name="l00192"></a><a class="code" href="group__gl__api.html#a925">00192</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a925">glArrayElement</a>( <a class="code" href="gl_8h.html#a693">GLint</a> i )<font class="keyword"></font>
00193 {
00194    mError(<font class="stringliteral">"glArrayElement is a placeholder ATM and should not be called"</font>);
00195 }
00196 
<a name="l00200"></a><a class="code" href="group__gl__api.html#a743">00200</a> <font class="keywordtype">void</font> <a class="code" href="group__gl__api.html#a8">glFlush</a>( <font class="keywordtype">void</font> )<font class="keyword"></font>
00201 {
00202    <a class="code" href="classCGeomManager.html">CGeomManager</a>&amp; gmanager = pGLContext-&gt;GetGeomManager();
00203    gmanager.<a class="code" href="classCGeomManager.html#a18">Flush</a>();
00204 }
00205  <font class="comment">// gl_api</font>
00207 
<a name="l00208"></a><a class="code" href="gmanager_8cpp.html#a729">00208</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a729">glEnableClientState</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> cap )<font class="keyword"></font>
00209 {
00210    <a class="code" href="classCGeomManager.html">CGeomManager</a>&amp; gmanager = pGLContext-&gt;GetGeomManager();
00211    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = gmanager.<a class="code" href="classCGeomManager.html#a7">GetVertArray</a>();
00212 
00213    <font class="keywordflow">switch</font> (cap) {
00214       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a25">GL_NORMAL_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a6">SetNormalsValid</a>(<font class="keyword">true</font>); <font class="keywordflow">break</font>;
00215       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a24">GL_VERTEX_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a5">SetVerticesValid</a>(<font class="keyword">true</font>); <font class="keywordflow">break</font>;
00216       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a26">GL_COLOR_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a8">SetColorsValid</a>(<font class="keyword">true</font>); <font class="keywordflow">break</font>;
00217       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a28">GL_TEXTURE_COORD_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a7">SetTexCoordsValid</a>(<font class="keyword">true</font>); <font class="keywordflow">break</font>;
00218 
00219       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a27">GL_INDEX_ARRAY</a>:
00220       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a29">GL_EDGE_FLAG_ARRAY</a>:
00221          <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"capability = %d"</font>, cap );
00222          <font class="keywordflow">break</font>;
00223    }
00224 }
00225 
<a name="l00226"></a><a class="code" href="gmanager_8cpp.html#a730">00226</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a730">glDisableClientState</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> cap )<font class="keyword"></font>
00227 {
00228    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00229    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = gmanager.<a class="code" href="classCGeomManager.html#a7">GetVertArray</a>();
00230 
00231    <font class="keywordflow">switch</font> (cap) {
00232       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a25">GL_NORMAL_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a6">SetNormalsValid</a>(<font class="keyword">false</font>); <font class="keywordflow">break</font>;
00233       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a24">GL_VERTEX_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a5">SetVerticesValid</a>(<font class="keyword">false</font>); <font class="keywordflow">break</font>;
00234       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a26">GL_COLOR_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a8">SetColorsValid</a>(<font class="keyword">false</font>); <font class="keywordflow">break</font>;
00235       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a28">GL_TEXTURE_COORD_ARRAY</a>: vertArray.<a class="code" href="classCVertArray.html#a7">SetTexCoordsValid</a>(<font class="keyword">false</font>); <font class="keywordflow">break</font>;
00236 
00237       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a27">GL_INDEX_ARRAY</a>:
00238       <font class="keywordflow">case</font> <a class="code" href="gl_8h.html#a29">GL_EDGE_FLAG_ARRAY</a>:
00239          <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"capability = %d"</font>, cap );
00240          <font class="keywordflow">break</font>;
00241    }
00242 }
00243 
00244 
00245 
<a name="l00246"></a><a class="code" href="gmanager_8cpp.html#a776">00246</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a776">glBegin</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> mode )<font class="keyword"></font>
00247 {
00248    <a class="code" href="classCGeomManager.html">CGeomManager</a>&amp; gmanager = pGLContext-&gt;GetGeomManager();
00249    gmanager.<a class="code" href="classCGeomManager.html#a10">BeginGeom</a>( mode );
00250 }
00251 
<a name="l00252"></a><a class="code" href="gmanager_8cpp.html#a804">00252</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a804">glNormal3f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> x, <a class="code" href="gl_8h.html#a698">GLfloat</a> y, <a class="code" href="gl_8h.html#a698">GLfloat</a> z )<font class="keyword"></font>
00253 {
00254    <a class="code" href="classCGeomManager.html">CGeomManager</a>&amp; gmanager = pGLContext-&gt;GetGeomManager();
00255    gmanager.<a class="code" href="classCGeomManager.html#a12">Normal</a>( cpu_vec_xyz(x, y, z) );
00256 }
00257 
<a name="l00258"></a><a class="code" href="gmanager_8cpp.html#a809">00258</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a809">glNormal3fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *v )<font class="keyword"></font>
00259 {
00260    <a class="code" href="gl_8h.html#a804">glNormal3f</a>( v[0], v[1], v[2] );
00261 }
00262 
<a name="l00263"></a><a class="code" href="gmanager_8cpp.html#a787">00263</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a787">glVertex4f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> x, <a class="code" href="gl_8h.html#a698">GLfloat</a> y, <a class="code" href="gl_8h.html#a698">GLfloat</a> z, <a class="code" href="gl_8h.html#a698">GLfloat</a> w )<font class="keyword"></font>
00264 {
00265    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00266    gmanager.<a class="code" href="classCGeomManager.html#a11">Vertex</a>( cpu_vec_xyzw(x, y, z, w) );
00267 }
00268 
<a name="l00269"></a><a class="code" href="gmanager_8cpp.html#a799">00269</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a799">glVertex4fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *vertex )<font class="keyword"></font>
00270 {
00271    <a class="code" href="gl_8h.html#a787">glVertex4f</a>( vertex[0], vertex[1], vertex[2], vertex[3] );
00272 }
00273 
<a name="l00274"></a><a class="code" href="gmanager_8cpp.html#a783">00274</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a783">glVertex3f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> x, <a class="code" href="gl_8h.html#a698">GLfloat</a> y, <a class="code" href="gl_8h.html#a698">GLfloat</a> z )<font class="keyword"></font>
00275 {
00276    <a class="code" href="gl_8h.html#a787">glVertex4f</a>(x, y, z, 1.0f);
00277 }
00278 
<a name="l00279"></a><a class="code" href="gmanager_8cpp.html#a795">00279</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a795">glVertex3fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *vertex )<font class="keyword"></font>
00280 {
00281    <a class="code" href="gl_8h.html#a787">glVertex4f</a>( vertex[0], vertex[1], vertex[2], 1.0f );
00282 }
00283 
<a name="l00284"></a><a class="code" href="gmanager_8cpp.html#a859">00284</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a859">glTexCoord2f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> u, <a class="code" href="gl_8h.html#a698">GLfloat</a> v )<font class="keyword"></font>
00285 {
00286    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00287    gmanager.<a class="code" href="classCGeomManager.html#a13">TexCoord</a>( u, v );
00288 }
00289 
<a name="l00290"></a><a class="code" href="gmanager_8cpp.html#a875">00290</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a875">glTexCoord2fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *texCoord )<font class="keyword"></font>
00291 {
00292    <a class="code" href="gl_8h.html#a859">glTexCoord2f</a>( texCoord[0], texCoord[1] );
00293 }
00294 
<a name="l00295"></a><a class="code" href="gmanager_8cpp.html#a824">00295</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a824">glColor3f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> red, <a class="code" href="gl_8h.html#a698">GLfloat</a> green, <a class="code" href="gl_8h.html#a698">GLfloat</a> blue )<font class="keyword"></font>
00296 {
00297    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00298    gmanager.<a class="code" href="classCGeomManager.html#a14">Color</a>( cpu_vec_xyzw(red, green, blue, 1.0f) );
00299 }
00300 
<a name="l00301"></a><a class="code" href="gmanager_8cpp.html#a840">00301</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a840">glColor3fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *color )<font class="keyword"></font>
00302 {
00303    <a class="code" href="gl_8h.html#a824">glColor3f</a>( color[0], color[1], color[2] );
00304 }
00305 
<a name="l00306"></a><a class="code" href="gmanager_8cpp.html#a832">00306</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a832">glColor4f</a>( <a class="code" href="gl_8h.html#a698">GLfloat</a> red, <a class="code" href="gl_8h.html#a698">GLfloat</a> green, <a class="code" href="gl_8h.html#a698">GLfloat</a> blue, <a class="code" href="gl_8h.html#a698">GLfloat</a> alpha )<font class="keyword"></font>
00307 {
00308    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00309    gmanager.<a class="code" href="classCGeomManager.html#a14">Color</a>( cpu_vec_xyzw(red, green, blue, alpha) );
00310 }
00311 
<a name="l00312"></a><a class="code" href="gmanager_8cpp.html#a848">00312</a> <font class="keywordtype">void</font> <a class="code" href="gl_8h.html#a848">glColor4fv</a>( <font class="keyword">const</font> <a class="code" href="gl_8h.html#a698">GLfloat</a> *color )<font class="keyword"></font>
00313 {
00314    <a class="code" href="gl_8h.html#a832">glColor4f</a>( color[0], color[1], color[2], color[3] );
00315 }
00316 
<a name="l00317"></a><a class="code" href="gmanager_8cpp.html#a777">00317</a> <font class="keywordtype">void</font> <a class="code" href="gmanager_8cpp.html#a24">glEnd</a>( <font class="keywordtype">void</font> )<font class="keyword"></font>
00318 {
00319    <a class="code" href="classCGeomManager.html">CGeomManager</a> &amp;gmanager = pGLContext-&gt;GetGeomManager();
00320    gmanager.<a class="code" href="classCGeomManager.html#a15">EndGeom</a>();
00321 }
00322 
00323 <font class="comment">/********************************************</font>
00324  * pgl api
00325  */
00326 
<a name="l00337"></a><a class="code" href="gmanager_8cpp.html#a41">00337</a> <font class="keywordtype">void</font> <a class="code" href="ps2gl_8h.html#a41">pglNormalPointer</a>( <a class="code" href="gl_8h.html#a693">GLint</a> size, <a class="code" href="gl_8h.html#a687">GLenum</a> type,
00338                        <a class="code" href="gl_8h.html#a697">GLsizei</a> stride, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a690">GLvoid</a> *ptr )<font class="keyword"></font>
00339 {
00340    <font class="keywordflow">if</font> ( stride != 0 ) {
00341       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"stride must be 0"</font> );
00342       <font class="keywordflow">return</font>;
00343    }
00344    <font class="keywordflow">if</font> ( type != <a class="code" href="gl_8h.html#a9">GL_FLOAT</a> ) {
00345       <a class="code" href="debug_8h.html#a1">mNotImplemented</a>( <font class="stringliteral">"type must be float"</font> );
00346       <font class="keywordflow">return</font>;
00347    }
00348    
00349    <a class="code" href="classCVertArray.html">CVertArray</a> &amp;vertArray = pGLContext-&gt;GetGeomManager().GetVertArray();
00350    vertArray.<a class="code" href="classCVertArray.html#a14">SetNormals</a>( (<font class="keywordtype">void</font>*)ptr );
00351    vertArray.<a class="code" href="classCVertArray.html#a22">SetWordsPerNormal</a>(size);
00352 }
00353 
<a name="l00354"></a><a class="code" href="gmanager_8cpp.html#a42">00354</a> <font class="keywordtype">void</font> <a class="code" href="ps2gl_8h.html#a42">pglDrawIndexedArrays</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType,
00355                            <font class="keywordtype">int</font> numIndices, <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* indices,
00356                            <font class="keywordtype">int</font> numVertices )<font class="keyword"></font>
00357 {
00358    pGLContext-&gt;GetGeomManager().DrawIndexedArrays(primType, numIndices, indices, numVertices);
00359 }
00360 
00394 <font class="keywordtype">void</font>
<a name="l00395"></a><a class="code" href="gmanager_8cpp.html#a59">00395</a> <a class="code" href="ps2gl_8h.html#a59">pglRegisterCustomPrimType</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType,
00396                            <a class="code" href="ps2gl_8h.html#a10">pglU64_t</a> requirements, <a class="code" href="ps2gl_8h.html#a10">pglU64_t</a> rendererReqMask, <font class="keywordtype">int</font> mergeContiguous )<font class="keyword"></font>
00397 {
00398    mErrorIf( ! CGeomManager::IsUserPrimType(primType), <font class="stringliteral">"custom prim types must have bit 31 set"</font> );
00399    <a class="code" href="classCGeomManager.html#d1">CGeomManager::RegisterUserPrimType</a>( primType, requirements, rendererReqMask, mergeContiguous );
00400 }
00401 
00408 <font class="keywordtype">void</font>
<a name="l00409"></a><a class="code" href="gmanager_8cpp.html#a60">00409</a> <a class="code" href="ps2gl_8h.html#a60">pglEnableCustom</a>( <a class="code" href="ps2gl_8h.html#a10">pglU64_t</a> flag )<font class="keyword"></font>
00410 {
00411    flag &amp;= ~(tU64)0xffffffff;
00412    pGLContext-&gt;GetGeomManager().EnableCustom( flag );
00413 }
00414 
00421 <font class="keywordtype">void</font>
<a name="l00422"></a><a class="code" href="gmanager_8cpp.html#a61">00422</a> <a class="code" href="ps2gl_8h.html#a61">pglDisableCustom</a>( <a class="code" href="ps2gl_8h.html#a10">pglU64_t</a> flag )<font class="keyword"></font>
00423 {
00424    flag &amp;= ~(tU64)0xffffffff;
00425    pGLContext-&gt;GetGeomManager().DisableCustom( flag );
00426 }
00427 
00428 <font class="keywordtype">void</font>
<a name="l00429"></a><a class="code" href="group__custom__renderers__prims__state.html#a3">00429</a> <a class="code" href="group__custom__renderers__prims__state.html#a3">pglUserRenderContextChanged</a>()<font class="keyword"></font>
00430 {
00431    pGLContext-&gt;GetGeomManager().SetUserRenderContextChanged();
00432 }
00433 
</pre></div><hr><address><small>ps2gl version cvs</small></address>
