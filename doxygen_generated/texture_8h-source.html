<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>texture.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>texture.h</h1><a href="texture_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*        Copyright (C) 2000,2001,2002  Sony Computer Entertainment America</font>
00002           
00003           This file is subject to the terms and conditions of the GNU Lesser
00004           General Public License Version 2.1. See the file "COPYING" in the
00005           main directory of this archive for more details.                             */
00006 
00007 <font class="preprocessor">#ifndef ps2gl_texture_h</font>
00008 <font class="preprocessor">#define ps2gl_texture_h</font>
00009 
00010 <font class="preprocessor">#include "<a class="code" href="texture_8h.html">ps2s/texture.h</a>"</font>
00011 <font class="preprocessor">#include "ps2s/gsmem.h"</font>
00012 
00013 <font class="preprocessor">#include "<a class="code" href="gl_8h.html">GL/gl.h</a>"</font>
00014 
00015 <font class="comment">/********************************************</font>
00016  * CTexManager
00017  */
00018 
00019 <font class="keyword">class </font><a class="code" href="classCGLContext.html">CGLContext</a>;
00020 <font class="keyword">class </font><a class="code" href="classCMMTexture.html">CMMTexture</a>;
00021 <font class="keyword">class </font><a class="code" href="classCMMClut.html">CMMClut</a>;
00022 <font class="keyword">class </font>CVifSCDmaPacket;
00023 
<a name="l00024"></a><a class="code" href="classCTexManager.html">00024</a> <font class="keyword">class </font><a class="code" href="classCTexManager.html">CTexManager</a> {
00025       <a class="code" href="classCGLContext.html">CGLContext</a>        &amp;GLContext;
00026 
00027       <font class="keywordtype">bool</font>              IsTexEnabled;
00028       <font class="keywordtype">bool</font>              InsideDListDef;
00029 
00030       <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font>  NumTexNames = 512;      <font class="comment">// :TODO: Make configurable</font>
00031       <a class="code" href="classCMMTexture.html">CMMTexture</a>        *TexNames[NumTexNames];
00032       <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>      Cursor;
00033 
00034       <a class="code" href="classCMMTexture.html">CMMTexture</a>        *DefaultTex, *CurTexture, *LastTexSent;
00035       <a class="code" href="classCMMClut.html">CMMClut</a>           *CurClut;
00036       GS::tTexMode      TexMode;
00037 
00038       <font class="keywordtype">void</font> IncCursor()<font class="keyword"> </font>{ Cursor = (Cursor + 1) &amp; (NumTexNames - 1); }
00039    <font class="keyword">public</font>:
00040       <a class="code" href="classCTexManager.html#a0">CTexManager</a>( <a class="code" href="classCGLContext.html">CGLContext</a> &amp;context );
00041       <a class="code" href="classCTexManager.html#a1">~CTexManager</a>();
00042 
00043       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a2">SetTexEnabled</a>( <font class="keywordtype">bool</font> yesNo );
<a name="l00044"></a><a class="code" href="classCTexManager.html#a3">00044</a>       <font class="keywordtype">bool</font> <a class="code" href="classCTexManager.html#a3">GetTexEnabled</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> IsTexEnabled; }
00045 
00046       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a4">GenTextures</a>( <a class="code" href="gl_8h.html#a697">GLsizei</a> numNewTexNames, <a class="code" href="gl_8h.html#a696">GLuint</a> *newTexNames );
00047       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a5">BindTexture</a>( <a class="code" href="gl_8h.html#a696">GLuint</a> texNameToBind );
00048       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a6">DeleteTextures</a>( <a class="code" href="gl_8h.html#a697">GLsizei</a> numToDelete, <font class="keyword">const</font> <a class="code" href="gl_8h.html#a696">GLuint</a> *texNames );
00049 
<a name="l00050"></a><a class="code" href="classCTexManager.html#a7">00050</a>       <a class="code" href="classCMMTexture.html">CMMTexture</a>&amp; <a class="code" href="classCTexManager.html#a7">GetCurTexture</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> *CurTexture; }
00051 
<a name="l00052"></a><a class="code" href="classCTexManager.html#a8">00052</a>       <a class="code" href="classCMMTexture.html">CMMTexture</a>&amp; <a class="code" href="classCTexManager.html#a8">GetNamedTexture</a>( <a class="code" href="gl_8h.html#a696">GLuint</a> tex )<font class="keyword"> const </font>{
00053          mErrorIf( TexNames[tex] == NULL, <font class="stringliteral">"Trying to access a null texture"</font> );
00054          <font class="keywordflow">return</font> *TexNames[tex];
00055       }
00056 
00057       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a9">UseCurTexture</a>( CVifSCDmaPacket &amp;renderPacket );
00058 
00059       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a10">SetTexMode</a>( GS::tTexMode mode );
00060 
00061       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a11">SetCurTexParam</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> pname, <a class="code" href="gl_8h.html#a693">GLint</a> param );
00062       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a12">SetCurTexImage</a>( tU128* imagePtr, tU32 w, tU32 h,
00063                            GS::tPSM psm );
00064       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a13">SetGsTexture</a>( GS::CMemArea &amp;area );
00065       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a14">SetCurClut</a>( <font class="keyword">const</font> <font class="keywordtype">void</font> *clut, <font class="keywordtype">int</font> numEntries );
00066 
<a name="l00067"></a><a class="code" href="classCTexManager.html#a15">00067</a>       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a15">BeginDListDef</a>()<font class="keyword"> </font>{ InsideDListDef = <font class="keyword">true</font>; }
<a name="l00068"></a><a class="code" href="classCTexManager.html#a16">00068</a>       <font class="keywordtype">void</font> <a class="code" href="classCTexManager.html#a16">EndDListDef</a>()<font class="keyword"> </font>{ InsideDListDef = <font class="keyword">false</font>; }
00069 };
00070 
00071 <font class="comment">/********************************************</font>
00072  * CMMClut
00073  */
00074 
<a name="l00078"></a><a class="code" href="classCMMClut.html">00078</a> <font class="keyword">class </font><a class="code" href="classCMMClut.html">CMMClut</a> : <font class="keyword">public</font> GS::CClut {
00079       GS::CMemArea      GsMem;
00080    <font class="keyword">public</font>:
<a name="l00081"></a><a class="code" href="classCMMClut.html#a0">00081</a>       <a class="code" href="classCMMClut.html#a0">CMMClut</a>( <font class="keyword">const</font> <font class="keywordtype">void</font> *table, <font class="keywordtype">int</font> numEntries = 256 )
00082          : GS::CClut(table, numEntries),
00083            GsMem(16, 16, GS::kPsm32, GS::kAlignPage)
00084       { }
00085 
<a name="l00086"></a><a class="code" href="classCMMClut.html#a1">00086</a>       <a class="code" href="classCMMClut.html#a1">~CMMClut</a>()<font class="keyword"> </font>{ }
00087 
00088       <font class="keywordtype">void</font> <a class="code" href="classCMMClut.html#a2">Load</a>( CVifSCDmaPacket &amp;packet );
00089 };
00090 
00091 <font class="comment">/********************************************</font>
00092  * CMMTexture (Mem Managed Texture)
00093  */
00094 
00095 <font class="keyword">namespace </font>GS {
00096    <font class="keyword">class </font>CMemArea;
00097 }
00098 
<a name="l00099"></a><a class="code" href="classCMMTexture.html">00099</a> <font class="keyword">class </font><a class="code" href="classCMMTexture.html">CMMTexture</a> : <font class="keyword">public</font> GS::CTexture
00100 {
00101       GS::CMemArea      *pImageMem;
00102       <font class="keywordtype">bool</font>              XferImage;
00103       <font class="keywordtype">bool</font>              IsResident;
00104 
00105    <font class="keyword">public</font>:
00106       <a class="code" href="classCMMTexture.html#a0">CMMTexture</a>( GS::tContext context );
00107       <a class="code" href="classCMMTexture.html#a1">~CMMTexture</a>();
00108 
00109       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a2">SetImage</a>( <font class="keyword">const</font> GS::CMemArea &amp;area );
00110       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a2">SetImage</a>( tU128* imagePtr, tU32 w, tU32 h, GS::tPSM psm );
00111 
<a name="l00112"></a><a class="code" href="classCMMTexture.html#a4">00112</a>       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a4">SetClut</a>( <font class="keyword">const</font> <a class="code" href="classCMMClut.html">CMMClut</a> &amp;clut )<font class="keyword"> </font>{
00113          CTexEnv::SetClutGsAddr( clut.GetGsAddr() );
00114       }
00115 
00116       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a5">ChangePsm</a>( GS::tPSM psm );
00117 
00118       <font class="comment">// the following Load methods will check to see if a texture is resident and</font>
00119       <font class="comment">// transfer it if necessary.  The Use methods invoke the corresponding Load but</font>
00120       <font class="comment">// also transfer the gs register settings that belong to the texture</font>
00121 
00122       <font class="comment">// warning! these two will flush the data cache!</font>
00123       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a6">Load</a>( <font class="keywordtype">bool</font> waitForEnd = <font class="keyword">true</font> );
00124       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a7">Use</a>( <font class="keywordtype">bool</font> waitForEnd = <font class="keyword">false</font> );
00125 
00126       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a6">Load</a>( CSCDmaPacket&amp; packet );
00127       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a6">Load</a>( CVifSCDmaPacket&amp; packet );
00128 
00129       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a7">Use</a>( CSCDmaPacket&amp; packet );
00130       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a7">Use</a>( CVifSCDmaPacket&amp; packet );
00131 
00132       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a12">BindToSlot</a>( GS::CMemSlot &amp;slot );
00133       <font class="keywordtype">void</font> <a class="code" href="classCMMTexture.html#a13">Free</a>( <font class="keywordtype">void</font> );
00134 };
00135 
00136 <font class="preprocessor">#endif // ps2gl_texture_h</font>
</pre></div><hr><address><small>ps2gl version cvs</small></address>
