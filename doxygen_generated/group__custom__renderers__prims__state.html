<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>defining custom renderers, primitive types, and state</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>defining custom renderers, primitive types, and state</h1>API to define custom primitive types, state chagnes, renderers, or override the default renderers. 
<a href="#_details">More...</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a0">pglRegisterCustomPrimType</a> (<a class="el" href="gl_8h.html#a687">GLenum</a> primType, <a class="el" href="ps2gl_8h.html#a10">pglU64_t</a> requirements, <a class="el" href="ps2gl_8h.html#a10">pglU64_t</a> rendererReqMask, int mergeContiguous)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Register a new primitive.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a1">pglEnableCustom</a> (<a class="el" href="ps2gl_8h.html#a10">pglU64_t</a> flag)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Enable a custom attribute/state change.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a2">pglDisableCustom</a> (<a class="el" href="ps2gl_8h.html#a10">pglU64_t</a> flag)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Disable a custom attribute/state change.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a3">pglUserRenderContextChanged</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a4">pglBeginRendererDefs</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Call this before registering any renderers.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a5">pglRegisterRenderer</a> (void *renderer)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Register a custom renderer.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a6">pglEndRendererDefs</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Call this after registering custom renderers.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>const char *&nbsp;</td><td valign=bottom><a class="el" href="group__custom__renderers__prims__state.html#a7">pglGetCurRendererName</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the name (string) of the current renderer.</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
API to define custom primitive types, state chagnes, renderers, or override the default renderers.
<p>
The ps2gl code that runs on the ee core is just a large, ugly state machine -- all of the "real" work is done in the renderers. There are currently a dozen or so internal renderers which handle different types of geometry, lighting, texturing, etc. Most of the internal renderers implement some case that none of the others can do, but a few are specializations of more general renderers that implement a commonly encountered case more efficiently that the general renderer can. Using the functions described below, an application can define custom renderers or override existing ones.
<p>
But first, an explanation of how ps2gl chooses renderers is necessary. ps2gl keeps a bitfield of capabilities that a renderer must provide to be chosen to render. This bitfield is called the "renderer requirements" and describes things like lighting, texturing, prim type, shading type, etc. Each renderer also keeps a corresponding bitfield describing the capabilities that it provides, called its "capabilities." Each bit means that the corresponding capability is required (or provided, in the case of a renderer). Consider the "lighting" bit. This bit is set when glEnable( GL_LIGHTING ) is called and changes the renderer requirements, causing ps2gl to look for a new renderer the next time geometry is rendered. Each renderer's capabilities will be compared to the current renderer requirements, and the first renderer that meets all the requirements is chosen. In this example, only a renderer that can do lit geometry will be selected.
<p>
Renderers are searched in the order they were registered, application-defined renderers first. This means that specialized renderers should be registered before general ones. It also means that to override a default renderer, an application need only register a renderer that provides the same capabilites (or a subset).
<p>
Implementing a custom renderer whose purpose is not to override a built-in renderer implies defining custom prim types and/or properties, for which the upper 32 bits of the renderer capabilities/requirements are reserved. See the function documentation below for more details.
<p>
For more information on implementing a renderer, see the file "<a class="el" href="renderer_8h.html">renderer.h</a>" which defines the <a class="el" href="classCRenderer.html">CRenderer</a> interface. (Sorry, but the renderer needs to be a cpp class.) The best examples are the default renderers, so take a look at linear_renderer.* and base_renderer.*. <hr><h2>Function Documentation</h2>
<a name="a4" doxytag="renderermanager.cpp::pglBeginRendererDefs"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglBeginRendererDefs </td>
          <td class="md">(&nbsp;</td>
          <td class="mdname1">&nbsp;          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Call this before registering any renderers.
<p>

<p>
Definition at line <a class="el" href="renderermanager_8cpp-source.html#l00736">736</a> of file <a class="el" href="renderermanager_8cpp-source.html">renderermanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="gmanager.cpp::pglDisableCustom"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglDisableCustom </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a10">pglU64_t</a>&nbsp;</td>
          <td class="mdname1">&nbsp; <em>flag</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disable a custom attribute/state change.
<p>
Call this to disable the corresponding bit(s) in the renderer requirements bitfield. The lower 32 bits should be zero. <dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>flag</em>&nbsp;</td><td>
the bit(s) to disable (lower 32 should be zero). This is the same constant passed to pglEnableCustom. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="gmanager_8cpp-source.html#l00422">422</a> of file <a class="el" href="gmanager_8cpp-source.html">gmanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="gmanager.cpp::pglEnableCustom"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglEnableCustom </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a10">pglU64_t</a>&nbsp;</td>
          <td class="mdname1">&nbsp; <em>flag</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enable a custom attribute/state change.
<p>
Call this to enable the corresponding bit(s) in the renderer requirements bitfield (see above). The lower 32 bits should be zero. <dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>flag</em>&nbsp;</td><td>
the bit(s) to enable (lower 32 should be zero) </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="gmanager_8cpp-source.html#l00409">409</a> of file <a class="el" href="gmanager_8cpp-source.html">gmanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="renderermanager.cpp::pglEndRendererDefs"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglEndRendererDefs </td>
          <td class="md">(&nbsp;</td>
          <td class="mdname1">&nbsp;          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Call this after registering custom renderers.
<p>

<p>
Definition at line <a class="el" href="renderermanager_8cpp-source.html#l00759">759</a> of file <a class="el" href="renderermanager_8cpp-source.html">renderermanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a7" doxytag="renderermanager.cpp::pglGetCurRendererName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const char* pglGetCurRendererName </td>
          <td class="md">(&nbsp;</td>
          <td class="mdname1">&nbsp;          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the name (string) of the current renderer.
<p>
You'll need to call <a class="el" href="group__gl__api.html#a8">glFlush</a>() to be sure that the renderer is in in sync. Probably doesn't make much sense to call this inside of a glBegin/glEnd pair. <dl compact><dt><b>
Returns: </b><dd>
pointer to the renderer's name </dl>
<p>
Definition at line <a class="el" href="renderermanager_8cpp-source.html#l00771">771</a> of file <a class="el" href="renderermanager_8cpp-source.html">renderermanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a0" doxytag="gmanager.cpp::pglRegisterCustomPrimType"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglRegisterCustomPrimType </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="gl_8h.html#a687">GLenum</a>&nbsp;</td>
          <td class="mdname">&nbsp; <em>primType</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a10">pglU64_t</a>&nbsp;</td>
          <td class="mdname">&nbsp; <em>requirements</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a10">pglU64_t</a>&nbsp;</td>
          <td class="mdname">&nbsp; <em>rendererReqMask</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname">&nbsp; <em>mergeContiguous</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register a new primitive.
<p>
After registering a primitive with this call it can be used anywhere a normal primitive can be used (glBegin, glDrawArrays, etc.). Defining a new primitive usually implies writing a renderer to go along with it.<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>primType</em>&nbsp;</td><td>
bit 31 must be set (this indicates a user prim to ps2gl). The lower 31 bits should be a number from 0 to PGL_MAX_CUSTOM_PRIM_TYPES. </td></tr>
<tr><td valign=top><em>requirements</em>&nbsp;</td><td>
gives the bit flags to be set in the renderer requirements bitfield (see the documentation for custom renderers). Usually this will be one bit indicating the prim type used to select a renderer. </td></tr>
<tr><td valign=top><em>rendererReqMask</em>&nbsp;</td><td>
a mask to be applied to the renderer requirements bitfield before testing against renderer capabilities. This could be used, for example, to mask off the default lower 32 bits if they are irrelevent to this custom primitive type. </td></tr>
<tr><td valign=top><em>mergeContiguous</em>&nbsp;</td><td>
rather calling a renderer with every block of geometry that is specified (with glBegin/End, DrawArrays, etc.), ps2gl tries to combine multiple blocks into a single call to the renderer. This flag tells ps2gl whether it can treat blocks of geometry that were specified independently but are contiguous in memory as a single block. (State changes will of course force them to be treated separately.) This is done, for example, with points, lines, triangles, and quads, but not with strips, since merging would lose the strip boundaries. </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="gmanager_8cpp-source.html#l00395">395</a> of file <a class="el" href="gmanager_8cpp-source.html">gmanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="renderermanager.cpp::pglRegisterRenderer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglRegisterRenderer </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname1">&nbsp; <em>renderer</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register a custom renderer.
<p>
The maximum number of custom renderers is  indicated by PGL_MAX_CUSTOM_RENDERERS. <dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>renderer</em>&nbsp;</td><td>
should point to a <a class="el" href="classCRenderer.html">CRenderer</a> object (passed as a void* for compatibility with C code) </td></tr>
</table>
</dl>
<p>
Definition at line <a class="el" href="renderermanager_8cpp-source.html#l00749">749</a> of file <a class="el" href="renderermanager_8cpp-source.html">renderermanager.cpp</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="gmanager.cpp::pglUserRenderContextChanged"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglUserRenderContextChanged </td>
          <td class="md">(&nbsp;</td>
          <td class="mdname1">&nbsp;          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="gmanager_8cpp-source.html#l00429">429</a> of file <a class="el" href="gmanager_8cpp-source.html">gmanager.cpp</a>.    </td>
  </tr>
</table>
<hr><address><small>ps2gl version cvs</small></address>
