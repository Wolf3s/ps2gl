<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GS memory 'slots'</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>GS memory 'slots'</h1>API for managing the "slots" that partition <a class="el" href="namespaceGS.html">GS</a> memory in ps2gl. 
<a href="#_details">More...</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a>&nbsp;</td><td valign=bottom><a class="el" href="group__gs__mem__slots.html#a0">pglAddGsMemSlot</a> (int startingPage, int pageLength, unsigned int pixelMode)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Adds a memory slot to the list of free slots.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__gs__mem__slots.html#a1">pglLockGsMemSlot</a> (<a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a> slot_handle)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Prevents a slot from being allocated or freed automatically.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__gs__mem__slots.html#a2">pglUnlockGsMemSlot</a> (<a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a> slot_handle)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Lets the memory manager automatically allocate/free a slot that was previously locked.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="group__gs__mem__slots.html#a3">pglRemoveAllGsMemSlots</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Removes all gs memory slots.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
API for managing the "slots" that partition <a class="el" href="namespaceGS.html">GS</a> memory in ps2gl.
<p>
As mentioned in the documentation for "<a class="el" href="namespaceGS.html">GS</a> memory management," ps2gl asks the user to partition <a class="el" href="namespaceGS.html">GS</a> memory into slots. A slot is defined by a starting page number in <a class="el" href="namespaceGS.html">GS</a> ram, a page length, and a preferred pixel format.
<p>
Note that the pixel format of a slot is its <em>preferred</em> format. If there are no slots of the requested pixel type large enough, ps2gl will try to find a big enough slot of a "higher" pixel type. For example, a 64x64, 32-bit slot (2 pages) might be allocated to hold a 128x128, 8-bit image if there were no 8-bit slots large enough.
<p>
The idea is that if a level has a lot of 64x64, 8-bit textures, you would allocate a lot of 64x64, 8-bit slots.
<p>
For example, say that our app uses a 640x448 interlaced display with a 24-bit depth buffer. We would create 3 slots, one for the depth buffer and two for a double-buffered frame buffer.
<p>
First, we need the size and starting address of each slot. The size is calculated from the dimensions of a page for the pixel format in question. Here are the dimensions of one <a class="el" href="namespaceGS.html">GS</a> "page" for the various pixel formats (from section 8.3 of the <a class="el" href="namespaceGS.html">GS</a> manual):
<p>
<ul>
<li>64x32: PSMCT32/24, PSMZ32/24<li>64x64: PSMCT16/16S<li>128x64: PSMT8<li>128x128: PSMT4</ul>
Each frame buffer is 640x224 (interlaced) at 32-bits. This means we need a slot 10 pages by 7 pages = 70 pages. The 24-bit depth buffer pages are the same size, so we need another 70 pages for the depth buffer.
<p>
Now that we have the sizes of each slot (70 pages), we just need the starting addresses. It doesn't really matter much where they begin, except of course when existing code assumes to find them in certain places. So let's make them contiguous starting at page 0: 
<p>
  pglAddGsMemSlot( 0, 70, SCE_GS_PSMCT32 );<br>
 pglAddGsMemSlot( 70, 70, SCE_GS_PSMCT32 );<br>
 pglAddGsMemSlot( 140, 70, SCE_GS_PSMZ32 );<br>
 
<p>

<p>
Take a look at <a class="el" href="ps2glut_8cpp.html">ps2glut.cpp</a> for a more complete example (a better tutorial is on the way). <hr><h2>Function Documentation</h2>
<a name="a0" doxytag="gsmemory.cpp::pglAddGsMemSlot"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a> pglAddGsMemSlot </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname">&nbsp; <em>startingPage</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname">&nbsp; <em>pageLength</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname">&nbsp; <em>pixelMode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a memory slot to the list of free slots.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>startingPage</em>&nbsp;</td><td>
the first page this slot occupies </td></tr>
<tr><td valign=top><em>pageLength</em>&nbsp;</td><td>
the number of pages this slot occupies (NOT the last page) </td></tr>
<tr><td valign=top><em>pixelMode</em>&nbsp;</td><td>
the preferred pixel format of this slot </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
a handle to the new slot </dl>
<p>
Definition at line <a class="el" href="gsmemory_8cpp-source.html#l00121">121</a> of file <a class="el" href="gsmemory_8cpp-source.html">gsmemory.cpp</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="gsmemory.cpp::pglLockGsMemSlot"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglLockGsMemSlot </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a>&nbsp;</td>
          <td class="mdname1">&nbsp; <em>slot_handle</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Prevents a slot from being allocated or freed automatically.
<p>
The slot can still be bound to an area by the user. 
<p>
Definition at line <a class="el" href="gsmemory_8cpp-source.html#l00136">136</a> of file <a class="el" href="gsmemory_8cpp-source.html">gsmemory.cpp</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="gsmemory.cpp::pglRemoveAllGsMemSlots"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglRemoveAllGsMemSlots </td>
          <td class="md">(&nbsp;</td>
          <td class="mdname1">&nbsp;          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes all gs memory slots.
<p>

<p>
Definition at line <a class="el" href="gsmemory_8cpp-source.html#l00157">157</a> of file <a class="el" href="gsmemory_8cpp-source.html">gsmemory.cpp</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="gsmemory.cpp::pglUnlockGsMemSlot"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void pglUnlockGsMemSlot </td>
          <td class="md">(&nbsp;</td>
          <td class="md" nowrap><a class="el" href="ps2gl_8h.html#a11">pgl_slot_handle_t</a>&nbsp;</td>
          <td class="mdname1">&nbsp; <em>slot_handle</em>          </td>
          <td class="md">)&nbsp;</td>
          <td class="md"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lets the memory manager automatically allocate/free a slot that was previously locked.
<p>

<p>
Definition at line <a class="el" href="gsmemory_8cpp-source.html#l00147">147</a> of file <a class="el" href="gsmemory_8cpp-source.html">gsmemory.cpp</a>.    </td>
  </tr>
</table>
<hr><address><small>ps2gl version cvs</small></address>
