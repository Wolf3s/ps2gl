<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>immgmanager.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>immgmanager.h</h1><a href="immgmanager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*        Copyright (C) 2000,2001,2002  Sony Computer Entertainment America</font>
00002           
00003           This file is subject to the terms and conditions of the GNU Lesser
00004           General Public License Version 2.1. See the file "COPYING" in the
00005           main directory of this archive for more details.                             */
00006 
00007 <font class="preprocessor">#ifndef ps2gl_immgmanager_h</font>
00008 <font class="preprocessor">#define ps2gl_immgmanager_h</font>
00009 
00010 <font class="preprocessor">#include "<a class="code" href="gmanager_8h.html">ps2gl/gmanager.h</a>"</font>
00011 
00012 <font class="comment">/********************************************</font>
00013  * CImmGeomManager - the immediate renderer
00014  */
00015 
<a name="l00016"></a><a class="code" href="classCImmGeomManager.html">00016</a> <font class="keyword">class </font><a class="code" href="classCImmGeomManager.html">CImmGeomManager</a> : <font class="keyword">public</font> <a class="code" href="classCGeomManager.html">CGeomManager</a> {
00017 
00018       <a class="code" href="classCRendererManager.html">CRendererManager</a>  RendererManager;
00019 
00020       <font class="comment">// a double set of buffers for storing immediate-mode vertices, normals, etc.</font>
00021       <font class="comment">// these don't really need to be dma packets since they will be reffed by</font>
00022       <font class="comment">// the microcode</font>
00023       CDmaPacket        VertexBuf0, NormalBuf0, TexCoordBuf0, ColorBuf0;
00024       CDmaPacket        VertexBuf1, NormalBuf1, TexCoordBuf1, ColorBuf1;
00025       CDmaPacket        *CurVertexBuf, *CurNormalBuf, *CurTexCoordBuf, *CurColorBuf;
00026 
00027       <a class="code" href="classCGeometryBlock.html">CGeometryBlock</a>    Geometry;
00028 
00029       <font class="keywordtype">void</font> CommitNewGeom();
00030 
00031    <font class="keyword">public</font>:
00032       <a class="code" href="classCImmGeomManager.html#a0">CImmGeomManager</a>( <a class="code" href="classCGLContext.html">CGLContext</a> &amp;context, <font class="keywordtype">int</font> immBufferQwordSize );
00033       <font class="keyword">virtual</font> <a class="code" href="classCImmGeomManager.html#a1">~CImmGeomManager</a>();
00034 
<a name="l00035"></a><a class="code" href="classCImmGeomManager.html#a2">00035</a>       <a class="code" href="classCRendererManager.html">CRendererManager</a>&amp; <a class="code" href="classCImmGeomManager.html#a2">GetRendererManager</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> RendererManager; }
00036 
00037       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a3">SwapBuffers</a>();
00038 
00039       <font class="comment">// state changes / updates</font>
00040 
00041       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a4">PrimChanged</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType );
00042       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a5">SyncRendererContext</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType );
00043       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a6">SyncRenderer</a>();
00044       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a7">SyncGsContext</a>();
00045       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a8">SyncColorMaterial</a>( <font class="keywordtype">bool</font> pvColorsArePresent );
00046 
00047       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a9">DrawingLinearArray</a>();
00048       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a10">DrawingIndexedArray</a>();
00049 
<a name="l00050"></a><a class="code" href="classCImmGeomManager.html#a11">00050</a>       <font class="keywordtype">void</font> <a class="code" href="classCImmGeomManager.html#a11">SyncArrayType</a>( ArrayType::tArrayType type )<font class="keyword"> </font>{
00051          <font class="keywordflow">if</font> (type == ArrayType::kLinear) <a class="code" href="classCImmGeomManager.html#a9">DrawingLinearArray</a>();
00052          <font class="keywordflow">else</font> <a class="code" href="classCImmGeomManager.html#a10">DrawingIndexedArray</a>();
00053       }
00054 
00055       <font class="comment">// for microcode</font>
00056 
00057       <font class="comment">// microcode needs to be able to request these for storage when no</font>
00058       <font class="comment">// normal, tex coord or vertex color is supplied for each vertex</font>
<a name="l00059"></a><a class="code" href="classCImmGeomManager.html#a12">00059</a>       <font class="keyword">inline</font> CDmaPacket&amp; <a class="code" href="classCImmGeomManager.html#a12">GetNormalBuf</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> *CurNormalBuf; }
<a name="l00060"></a><a class="code" href="classCImmGeomManager.html#a13">00060</a>       <font class="keyword">inline</font> CDmaPacket&amp; <a class="code" href="classCImmGeomManager.html#a13">GetTexCoordBuf</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> *CurTexCoordBuf; }
00061 
00062       <font class="comment">// user state</font>
00063 
<a name="l00064"></a><a class="code" href="classCImmGeomManager.html#a14">00064</a>       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a8">EnableCustom</a>( tU64 flag )<font class="keyword"> </font>{ RendererManager.<a class="code" href="classCRendererManager.html#a8">EnableCustom</a>(flag); }
<a name="l00065"></a><a class="code" href="classCImmGeomManager.html#a15">00065</a>       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a9">DisableCustom</a>( tU64 flag )<font class="keyword"> </font>{ RendererManager.<a class="code" href="classCRendererManager.html#a9">DisableCustom</a>(flag); }
00066 
00067       <font class="comment">// geometry specification</font>
00068 
00069       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a10">BeginGeom</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> mode );
00070       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a11">Vertex</a>( cpu_vec_xyzw newVert );
00071       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a12">Normal</a>( cpu_vec_xyz normal );
00072       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a13">TexCoord</a>( <font class="keywordtype">float</font> u, <font class="keywordtype">float</font> v );
00073       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a14">Color</a>( cpu_vec_xyzw color );
00074       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a15">EndGeom</a>();
00075       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a16">DrawArrays</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> mode, <font class="keywordtype">int</font> first, <font class="keywordtype">int</font> count );
00076       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a17">DrawIndexedArrays</a>( <a class="code" href="gl_8h.html#a687">GLenum</a> primType,
00077                               <font class="keywordtype">int</font> numIndices, <font class="keyword">const</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">char</font>* indices,
00078                               <font class="keywordtype">int</font> numVertices );
00079       <font class="keywordtype">void</font> <a class="code" href="classCGeomManager.html#a18">Flush</a>();
00080 };
00081 
00082 <font class="preprocessor">#endif // ps2gl_immgmanager_h</font>
</pre></div><hr><address><small>ps2gl version cvs</small></address>
