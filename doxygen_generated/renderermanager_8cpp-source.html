<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>renderermanager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>renderermanager.cpp</h1><a href="renderermanager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*        Copyright (C) 2000,2001,2002  Sony Computer Entertainment America</font>
00002           
00003           This file is subject to the terms and conditions of the GNU Lesser
00004           General Public License Version 2.1. See the file "COPYING" in the
00005           main directory of this archive for more details.                             */
00006 
00007 <font class="preprocessor">#include "ps2s/packet.h"</font>
00008 
00009 <font class="preprocessor">#include "<a class="code" href="renderermanager_8h.html">ps2gl/renderermanager.h</a>"</font>
00010 <font class="preprocessor">#include "<a class="code" href="glcontext_8h.html">ps2gl/glcontext.h</a>"</font>
00011 <font class="preprocessor">#include "<a class="code" href="metrics_8h.html">ps2gl/metrics.h</a>"</font>
00012 
00013 <font class="preprocessor">#include "<a class="code" href="linear__renderer_8h.html">ps2gl/linear_renderer.h</a>"</font>
00014 <font class="preprocessor">#include "<a class="code" href="indexed__renderer_8h.html">ps2gl/indexed_renderer.h</a>"</font>
00015 
00016 <font class="preprocessor">#include "vu1renderers.h"</font>
00017 <font class="preprocessor">#include "vu1_mem_linear.h"</font>
00018 
00019 <font class="keyword">using</font> <font class="keyword">namespace </font>RendererProps;
00020 
00021 <font class="keyword">extern</font> <font class="stringliteral">"C"</font> <font class="keywordtype">void</font> <a class="code" href="renderermanager_8cpp.html#a1">vsmIndexed</a>();
00022 
00023 <font class="comment">/********************************************</font>
00024  * methods
00025  */
00026 
00027 <font class="preprocessor">#ifdef PS2_LINUX</font>
00028 <font class="preprocessor">#  include &lt;sys/mman.h&gt;</font>
00029 <font class="preprocessor">#  define mVsmAddr(__sym)                                       \</font>
00030    (void*)(dmaableRenderers + (tU32)__sym - (tU32)vsmStart)
00031 <font class="comment">// this will have been defined by glut or the application</font>
00032 <font class="comment">// when it opened the ps2stuff device</font>
00033 <font class="keyword">extern</font> <font class="keywordtype">int</font> <a class="code" href="linux__glut_8cpp.html#a0">Ps2stuffDeviceFd</a>;
00034 <font class="preprocessor">#else</font>
<a name="l00035"></a><a class="code" href="renderermanager_8cpp.html#a0">00035</a> <font class="preprocessor">#  define mVsmAddr(__sym)       (void*)__sym</font>
00036 <font class="preprocessor">#endif</font>
00037 
<a name="l00038"></a><a class="code" href="classCRendererManager.html#a0">00038</a> <a class="code" href="classCRendererManager.html#a0">CRendererManager::CRendererManager</a>( <a class="code" href="classCGLContext.html">CGLContext</a> &amp;context)
00039    : GLContext(context),
00040      RendererReqsHaveChanged(false),
00041      CurUserPrimReqs(0), CurUserPrimReqMask(~0),
00042      NumDefaultRenderers(0), NumUserRenderers(0),
00043      CurrentRenderer(NULL), NewRenderer(NULL)
00044 {
00045    RendererRequirements.<a class="code" href="classCRendererProps.html#m0">PrimType</a>        = 0;
00046    RendererRequirements.<a class="code" href="classCRendererProps.html#m1">Lighting</a>        = 0;
00047    RendererRequirements.<a class="code" href="classCRendererProps.html#m2">NumDirLights</a>    = 0;
00048    RendererRequirements.<a class="code" href="classCRendererProps.html#m3">NumPtLights</a>     = 0;
00049    RendererRequirements.<a class="code" href="classCRendererProps.html#m4">Texture</a>         = 0;
00050    RendererRequirements.<a class="code" href="classCRendererProps.html#m5">Specular</a>        = 0;
00051    RendererRequirements.<a class="code" href="classCRendererProps.html#m6">PerVtxMaterial</a>  = <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>;
00052    RendererRequirements.<a class="code" href="classCRendererProps.html#m7">Clipping</a>        = <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>;
00053    RendererRequirements.<a class="code" href="classCRendererProps.html#m8">CullFace</a>        = 0;
00054    RendererRequirements.<a class="code" href="classCRendererProps.html#m9">TwoSidedLighting</a> = 0;
00055    RendererRequirements.<a class="code" href="classCRendererProps.html#m10">ArrayAccess</a>     = 0;
00056    RendererRequirements.<a class="code" href="classCRendererProps.html#m12">UserProps</a>       = 0;
00057 
00058 <font class="preprocessor">#ifdef PS2_LINUX</font>
00059    tU32 dmaableRenderers = (tU32)mmap(0, (tU32)vsmEnd - (tU32)vsmStart,
00060                                       PROT_READ | PROT_WRITE,
00061                                       MAP_SHARED, <a class="code" href="linux__glut_8cpp.html#a0">Ps2stuffDeviceFd</a>,
00062                                       1 );
00063    memcpy( (<font class="keywordtype">void</font>*)dmaableRenderers, (<font class="keywordtype">void</font>*)vsmStart, (tU32)vsmEnd - (tU32)vsmStart );
00064 <font class="preprocessor">#endif</font>
00065 
00066    <a class="code" href="classCRendererProps.html">CRendererProps</a> no_reqs;
00067    no_reqs = (tU64)0;
00068 
00069    <font class="comment">// indexed array renderer</font>
00070    {
00071       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00072       {
00073          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00074          Lighting:      1,
00075          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00076          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00077          Texture:       1,
00078          Specular:      1,
00079          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00080          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00081          CullFace:      1,
00082          TwoSidedLighting: 0,
00083          ArrayAccess: kIndexed
00084       };
00085 
00086       RegisterDefaultRenderer( <font class="keyword">new</font> CIndexedRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(<a class="code" href="renderermanager_8cpp.html#a1">vsmIndexed</a>), capabilities, no_reqs, 3, 3,
00087                                                     <font class="stringliteral">"indexed"</font>) );
00088    }
00089 
00090    <font class="comment">// fast, no lights renderer</font>
00091    {
00092       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00093       {
00094          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00095          Lighting:      0,
00096          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a>,
00097          NumPtLights:   0,
00098          Texture:       1,
00099          Specular:      0,
00100          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00101          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a>,
00102          CullFace:      0,
00103          TwoSidedLighting: 0,
00104          ArrayAccess: kLinear
00105       };
00106 
00107       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmFastNoLights), capabilities, no_reqs, 3, 3,
00108                                                    kInputStart, kInputBufSize - kInputStart,
00109                                                    <font class="stringliteral">"fast, no lights"</font>) );
00110    }
00111    <font class="comment">// fast renderer</font>
00112    {
00113       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00114       {
00115          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00116          Lighting:      1,
00117          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a>,
00118          NumPtLights:   0,
00119          Texture:       1,
00120          Specular:      0,
00121          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00122          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a>,
00123          CullFace:      0,
00124          TwoSidedLighting: 0,
00125          ArrayAccess: kLinear
00126       };
00127 
00128       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmFast), capabilities, no_reqs, 3, 3,
00129                                                    kInputStart, kInputBufSize - kInputStart,
00130                                                    <font class="stringliteral">"fast"</font>) );
00131    }
00132 
00133    <font class="comment">// SCEI renderer</font>
00134    {
00135       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00136       {
00137          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00138          Lighting:      1,
00139          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a>,
00140          NumPtLights:   0,
00141          Texture:       1,
00142          Specular:      0,
00143          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00144          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00145          CullFace:      0,
00146          TwoSidedLighting: 0,
00147          ArrayAccess: kLinear
00148       };
00149 
00150       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmSCEI), capabilities, no_reqs, 3, 3,
00151                                                    kInputStart, kInputBufSize - kInputStart,
00152                                                    <font class="stringliteral">"scei"</font>) );
00153    }
00154 
00155    <font class="comment">// linear, no specular renderers</font>
00156 
00157    {
00158       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00159       {
00160          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00161          Lighting:      1,
00162          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00163          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00164          Texture:       1,
00165          Specular:      0,
00166          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00167          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00168          CullFace:      1,
00169          TwoSidedLighting: 0,
00170          ArrayAccess: kLinear
00171       };
00172 
00173       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralNoSpec), capabilities, no_reqs, 3, 3,
00174                                                    kInputStart, kInputBufSize - kInputStart,
00175                                                    <font class="stringliteral">"linear, no specular"</font>) );
00176    }
00177    {
00178       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00179       {
00180          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a1">kTriangles</a>,
00181          Lighting:      1,
00182          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00183          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00184          Texture:       1,
00185          Specular:      0,
00186          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00187          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00188          CullFace:      1,
00189          TwoSidedLighting: 0,
00190          ArrayAccess: kLinear
00191       };
00192 
00193       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralNoSpecTri), capabilities, no_reqs, 3, 3,
00194                                                    kInputStart, kInputBufSize - kInputStart,
00195                                                    <font class="stringliteral">"linear, tris, no specular"</font>) );
00196    }
00197    {
00198       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00199       {
00200          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a2">kQuads</a>,
00201          Lighting:      1,
00202          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00203          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00204          Texture:       1,
00205          Specular:      0,
00206          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00207          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00208          CullFace:      1,
00209          TwoSidedLighting: 0,
00210          ArrayAccess: kLinear
00211       };
00212 
00213       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralNoSpecQuad), capabilities, no_reqs, 3, 3,
00214                                                    kInputStart, kInputBufSize - kInputStart,
00215                                                    <font class="stringliteral">"linear, quads, no specular"</font>) );
00216    }
00217 
00218    <font class="comment">// linear renderers</font>
00219 
00220    {
00221       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00222       {
00223          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00224          Lighting:      1,
00225          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00226          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00227          Texture:       1,
00228          Specular:      1,
00229          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00230          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00231          CullFace:      1,
00232          TwoSidedLighting: 0,
00233          ArrayAccess: kLinear
00234       };
00235 
00236       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneral), capabilities, no_reqs, 3, 3,
00237                                                    kInputStart, kInputBufSize - kInputStart,
00238                                                    <font class="stringliteral">"linear"</font>) );
00239    }
00240    {
00241       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00242       {
00243          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a2">kQuads</a>,
00244          Lighting:      1,
00245          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00246          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00247          Texture:       1,
00248          Specular:      1,
00249          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00250          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00251          CullFace:      1,
00252          TwoSidedLighting: 0,
00253          ArrayAccess: kLinear
00254       };
00255 
00256       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralQuad), capabilities, no_reqs, 3, 3,
00257                                                    kInputStart, kInputBufSize - kInputStart,
00258                                                    <font class="stringliteral">"linear, quads"</font>) );
00259    }
00260    {
00261       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00262       {
00263          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a1">kTriangles</a>,
00264          Lighting:      1,
00265          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00266          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00267          Texture:       1,
00268          Specular:      1,
00269          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a8">kNoMaterial</a>,
00270          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00271          CullFace:      1,
00272          TwoSidedLighting: 0,
00273          ArrayAccess: kLinear
00274       };
00275 
00276       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralTri), capabilities, no_reqs, 3, 3,
00277                                                    kInputStart, kInputBufSize - kInputStart,
00278                                                    <font class="stringliteral">"linear, tris"</font>) );
00279    }
00280 
00281    <font class="comment">// linear, per-vertex color renderers</font>
00282 
00283    {
00284       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00285       {
00286          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>,
00287          Lighting:      1,
00288          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00289          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00290          Texture:       1,
00291          Specular:      1,
00292          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a9">kDiffuse</a>,
00293          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00294          CullFace:      1,
00295          TwoSidedLighting: 0,
00296          ArrayAccess: kLinear
00297       };
00298 
00299       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralPVDiff), capabilities, no_reqs, 4, 3,
00300                                                    kInputStart, kInputBufSize - kInputStart,
00301                                                    <font class="stringliteral">"linear, pvc"</font>) );
00302    }
00303    {
00304       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00305       {
00306          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a1">kTriangles</a>,
00307          Lighting:      1,
00308          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00309          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00310          Texture:       1,
00311          Specular:      1,
00312          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a9">kDiffuse</a>,
00313          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00314          CullFace:      1,
00315          TwoSidedLighting: 0,
00316          ArrayAccess: kLinear
00317       };
00318 
00319       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralPVDiffTri), capabilities, no_reqs, 4, 3,
00320                                                    kInputStart, kInputBufSize - kInputStart,
00321                                                    <font class="stringliteral">"linear, pvc, tris"</font>) );
00322    }
00323    {
00324       <a class="code" href="classCRendererProps.html">CRendererProps</a> capabilities =
00325       {
00326          PrimType:      <a class="code" href="namespaceRendererProps.html#a15a2">kQuads</a>,
00327          Lighting:      1,
00328          NumDirLights:  <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a> | <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>,
00329          NumPtLights:   <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a> | <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a> | <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>,
00330          Texture:       1,
00331          Specular:      1,
00332          PerVtxMaterial: <a class="code" href="namespaceRendererProps.html#a18a9">kDiffuse</a>,
00333          Clipping:      <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a> | <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a>,
00334          CullFace:      1,
00335          TwoSidedLighting: 0,
00336          ArrayAccess: kLinear
00337       };
00338 
00339       RegisterDefaultRenderer( <font class="keyword">new</font> CLinearRenderer(<a class="code" href="renderermanager_8cpp.html#a0">mVsmAddr</a>(vsmGeneralPVDiffQuad), capabilities, no_reqs, 4, 3,
00340                                                    kInputStart, kInputBufSize - kInputStart,
00341                                                    <font class="stringliteral">"linear, pvc, quads"</font>) );
00342    }
00343 
00344    <font class="comment">// if we don't do this pglGetCurRendererName() will crash if called before rendering</font>
00345    <font class="comment">// any geometry</font>
00346    CurrentRenderer = &amp;DefaultRenderers[0];
00347 }
00348 
00349 <font class="keywordtype">void</font>
00350 CRendererManager::RegisterDefaultRenderer( <a class="code" href="classCRenderer.html">CRenderer</a> *renderer )<font class="keyword"></font>
00351 {
00352    mErrorIf( NumDefaultRenderers == kMaxDefaultRenderers,
00353              <font class="stringliteral">"Trying to register too many renderers; adjust the limit"</font> );
00354 
00355    <a class="code" href="structtRenderer.html">tRenderer</a> newEntry = { renderer-&gt;<a class="code" href="classCRenderer.html#a0">GetCapabilities</a>(), renderer-&gt;<a class="code" href="classCRenderer.html#a1">GetRequirements</a>(), renderer };
00356    DefaultRenderers[NumDefaultRenderers++] = newEntry;
00357 }
00358 
00359 <font class="keywordtype">void</font>
<a name="l00360"></a><a class="code" href="classCRendererManager.html#a1">00360</a> <a class="code" href="classCRendererManager.html#a1">CRendererManager::RegisterUserRenderer</a>( <a class="code" href="classCRenderer.html">CRenderer</a> *renderer )<font class="keyword"></font>
00361 {
00362    mErrorIf( renderer == NULL,
00363              <font class="stringliteral">"Trying to register a null renderer is not playing fair..."</font> );
00364 
00365    mErrorIf( NumUserRenderers == kMaxUserRenderers,
00366              <font class="stringliteral">"Trying to register too many renderers; adjust the limit"</font> );
00367 
00368    <a class="code" href="structtRenderer.html">tRenderer</a> newEntry = { renderer-&gt;<a class="code" href="classCRenderer.html#a0">GetCapabilities</a>(), renderer-&gt;<a class="code" href="classCRenderer.html#a1">GetRequirements</a>(), renderer };
00369    UserRenderers[NumUserRenderers++] = newEntry;
00370 }
00371 
00372 <font class="comment">// state updates</font>
00373 
00374 <font class="keywordtype">void</font>
<a name="l00375"></a><a class="code" href="classCRendererManager.html#a8">00375</a> <a class="code" href="classCRendererManager.html#a8">CRendererManager::EnableCustom</a>( tU64 flag )<font class="keyword"></font>
00376 {
00377    tU64 newState = RendererRequirements;
00378    newState |= flag;
00379 
00380    <font class="keywordflow">if</font> ( newState != (tU64)RendererRequirements )
00381       RendererReqsHaveChanged = <font class="keyword">true</font>;
00382 
00383    RendererRequirements = newState;
00384 }
00385 
00386 <font class="keywordtype">void</font>
<a name="l00387"></a><a class="code" href="classCRendererManager.html#a9">00387</a> <a class="code" href="classCRendererManager.html#a9">CRendererManager::DisableCustom</a>( tU64 flag )<font class="keyword"></font>
00388 {
00389    tU64 newState = RendererRequirements;
00390    newState &amp;= ~flag;
00391 
00392    <font class="keywordflow">if</font> ( newState != (tU64)RendererRequirements )
00393       RendererReqsHaveChanged = <font class="keyword">true</font>;
00394 
00395    RendererRequirements = newState;
00396 }
00397 
00398 <font class="keywordtype">void</font>
<a name="l00399"></a><a class="code" href="classCRendererManager.html#a10">00399</a> <a class="code" href="classCRendererManager.html#a10">CRendererManager::NumLightsChanged</a>( <a class="code" href="renderermanager_8h.html#a3">tLightType</a> type, <font class="keywordtype">int</font> num )<font class="keyword"></font>
00400 {
00401    <a class="code" href="classCRendererProps.html">CRendererProps</a> newState = RendererRequirements;
00402 
00403    <font class="keywordflow">switch</font> (type) {
00404       <font class="keywordflow">case</font> <a class="code" href="renderermanager_8h.html#a3a0">kDirectional</a>:
00405          <font class="keywordflow">if</font> ( num == 0 )
00406             newState.<a class="code" href="classCRendererProps.html#m2">NumDirLights</a> = 0;
00407          <font class="keywordflow">else</font> <font class="keywordflow">if</font> (0 &lt; num &amp;&amp; num &lt;= 3)
00408             newState.<a class="code" href="classCRendererProps.html#m2">NumDirLights</a> = <a class="code" href="namespaceRendererProps.html#a16a3">k3DirLights</a>; <font class="comment">// in namespace??</font>
00409          <font class="keywordflow">else</font>
00410             newState.<a class="code" href="classCRendererProps.html#m2">NumDirLights</a> = <a class="code" href="namespaceRendererProps.html#a16a4">k8DirLights</a>;
00411 
00412          <font class="keywordflow">if</font> ( RendererRequirements != newState ) {
00413             RendererRequirements = newState;
00414             RendererReqsHaveChanged = <font class="keyword">true</font>;
00415          }
00416          <font class="keywordflow">break</font>;
00417 
00418       <font class="keywordflow">case</font> <a class="code" href="renderermanager_8h.html#a3a1">kPoint</a>:
00419          <font class="keywordflow">if</font> (num == 0)
00420             newState.<a class="code" href="classCRendererProps.html#m3">NumPtLights</a> = 0;
00421          <font class="keywordflow">else</font> <font class="keywordflow">if</font> (num == 1)
00422             newState.<a class="code" href="classCRendererProps.html#m3">NumPtLights</a> = <a class="code" href="namespaceRendererProps.html#a17a5">k1PtLight</a>;
00423          <font class="keywordflow">else</font> <font class="keywordflow">if</font> (num == 2)
00424             newState.<a class="code" href="classCRendererProps.html#m3">NumPtLights</a> = <a class="code" href="namespaceRendererProps.html#a17a6">k2PtLights</a>;
00425          <font class="keywordflow">else</font>
00426             newState.<a class="code" href="classCRendererProps.html#m3">NumPtLights</a> = <a class="code" href="namespaceRendererProps.html#a17a7">k8PtLights</a>;
00427 
00428          <font class="keywordflow">if</font> ( RendererRequirements != newState ) {
00429             RendererRequirements = newState;
00430             RendererReqsHaveChanged = <font class="keyword">true</font>;
00431          }
00432          <font class="keywordflow">break</font>;
00433 
00434       <font class="keywordflow">case</font> <a class="code" href="renderermanager_8h.html#a3a2">kSpot</a>:
00435          <font class="keywordflow">break</font>;
00436    }
00437 }
00438 
00439 <font class="keywordtype">void</font>
<a name="l00440"></a><a class="code" href="classCRendererManager.html#a11">00440</a> <a class="code" href="classCRendererManager.html#a11">CRendererManager::PrimChanged</a>( <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> prim )<font class="keyword"></font>
00441 {
00442    <font class="comment">// is this a user-defined prim type?</font>
00443    <font class="keywordflow">if</font> ( <a class="code" href="classCGeomManager.html#d0">CGeomManager::IsUserPrimType</a>(prim) )<font class="keyword"> </font>{
00444       <font class="comment">// user-defined</font>
00445 
00446       tU64 newState = RendererRequirements;
00447 
00448       <font class="comment">// clear the current user prim flags (if any)</font>
00449       newState &amp;= ~CurUserPrimReqs;
00450 
00451       <font class="comment">// clear the user-prim-type flag (bit 31)</font>
00452       prim &amp;= 0x7fffffff;
00453 
00454       CurUserPrimReqs = <a class="code" href="classCGeomManager.html#d2">CGeomManager::GetUserPrimRequirements</a>(prim);
00455       newState |= CurUserPrimReqs;
00456 
00457       CurUserPrimReqMask = <a class="code" href="classCGeomManager.html#d4">CGeomManager::GetUserPrimReqMask</a>(prim);
00458 
00459       <font class="keywordflow">if</font> ( (tU64)RendererRequirements != newState ) {
00460          RendererRequirements = newState;
00461          RendererReqsHaveChanged = <font class="keyword">true</font>;
00462       }
00463    }
00464    <font class="keywordflow">else</font> {
00465       <font class="comment">// normal prim type</font>
00466 
00467       <a class="code" href="classCRendererProps.html">CRendererProps</a> newState = RendererRequirements;
00468 
00469       <font class="keywordflow">if</font> ( CurUserPrimReqs ) {
00470          RendererReqsHaveChanged = <font class="keyword">true</font>;
00471          <font class="comment">// clear any requirements set by a user prim type</font>
00472          newState = (tU64)newState &amp; ~CurUserPrimReqs;
00473          CurUserPrimReqs = 0;
00474       }
00475 
00476       CurUserPrimReqMask = ~(tU32)0;
00477 
00478       <font class="keywordflow">if</font> (prim &lt;= <a class="code" href="gl_8h.html#a16">GL_LINE_STRIP</a>)
00479          newState.<a class="code" href="classCRendererProps.html#m0">PrimType</a> = <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>;
00480       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (prim == <a class="code" href="gl_8h.html#a18">GL_TRIANGLE_STRIP</a>
00481                || prim == <a class="code" href="gl_8h.html#a19">GL_TRIANGLE_FAN</a>
00482                || prim == <a class="code" href="gl_8h.html#a22">GL_POLYGON</a>)
00483          newState.<a class="code" href="classCRendererProps.html#m0">PrimType</a> = <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>;
00484       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (prim == <a class="code" href="gl_8h.html#a21">GL_QUAD_STRIP</a>)
00485          newState.<a class="code" href="classCRendererProps.html#m0">PrimType</a> = <a class="code" href="namespaceRendererProps.html#a15a0">kPtsLinesStripsFans</a>;
00486       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (prim == <a class="code" href="gl_8h.html#a17">GL_TRIANGLES</a>)
00487          newState.<a class="code" href="classCRendererProps.html#m0">PrimType</a> = <a class="code" href="namespaceRendererProps.html#a15a1">kTriangles</a>;
00488       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (prim == <a class="code" href="gl_8h.html#a20">GL_QUADS</a>)
00489          newState.<a class="code" href="classCRendererProps.html#m0">PrimType</a> = <a class="code" href="namespaceRendererProps.html#a15a2">kQuads</a>;
00490       <font class="keywordflow">else</font> {
00491          mError(<font class="stringliteral">"shouldn't get here"</font>);
00492       }
00493 
00494       <font class="keywordflow">if</font> ( RendererRequirements != newState ) {
00495          RendererRequirements = newState;
00496          RendererReqsHaveChanged = <font class="keyword">true</font>;
00497       }
00498    }
00499 }
00500 
00501 <font class="keywordtype">void</font>
<a name="l00502"></a><a class="code" href="classCRendererManager.html#a12">00502</a> <a class="code" href="classCRendererManager.html#a12">CRendererManager::TexEnabledChanged</a>( <font class="keywordtype">bool</font> enabled )<font class="keyword"></font>
00503 {
00504    <a class="code" href="classCRendererProps.html">CRendererProps</a> newState = RendererRequirements;
00505 
00506    <font class="keywordflow">if</font> ( enabled ) newState.<a class="code" href="classCRendererProps.html#m4">Texture</a> = 1;
00507    <font class="keywordflow">else</font> newState.<a class="code" href="classCRendererProps.html#m4">Texture</a> = 0;
00508 
00509    <font class="keywordflow">if</font> ( RendererRequirements != newState ) {
00510       RendererRequirements = newState;
00511       RendererReqsHaveChanged = <font class="keyword">true</font>;
00512    }
00513 }
00514 
00515 <font class="keywordtype">void</font>
<a name="l00516"></a><a class="code" href="classCRendererManager.html#a13">00516</a> <a class="code" href="classCRendererManager.html#a13">CRendererManager::LightingEnabledChanged</a>( <font class="keywordtype">bool</font> enabled )<font class="keyword"></font>
00517 {
00518    <a class="code" href="classCRendererProps.html">CRendererProps</a> newState = RendererRequirements;
00519 
00520    <font class="keywordflow">if</font> (enabled) newState.<a class="code" href="classCRendererProps.html#m1">Lighting</a> = 1;
00521    <font class="keywordflow">else</font> newState.<a class="code" href="classCRendererProps.html#m1">Lighting</a> = 0;
00522 
00523    <font class="keywordflow">if</font> (RendererRequirements != newState) {
00524       RendererRequirements = newState;
00525       RendererReqsHaveChanged = <font class="keyword">true</font>;
00526    }
00527 }
00528 
00529 <font class="keywordtype">void</font>
<a name="l00530"></a><a class="code" href="classCRendererManager.html#a14">00530</a> <a class="code" href="classCRendererManager.html#a14">CRendererManager::SpecularEnabledChanged</a>( <font class="keywordtype">bool</font> enabled )<font class="keyword"></font>
00531 {
00532    <a class="code" href="classCRendererProps.html">CRendererProps</a> newState = RendererRequirements;
00533 
00534    <font class="keywordflow">if</font> (enabled) newState.<a class="code" href="classCRendererProps.html#m5">Specular</a> = 1;
00535    <font class="keywordflow">else</font> newState.<a class="code" href="classCRendererProps.html#m5">Specular</a> = 0;
00536    
00537    <font class="keywordflow">if</font> (RendererRequirements != newState) {
00538       RendererRequirements = newState;
00539       RendererReqsHaveChanged = <font class="keyword">true</font>;
00540    }
00541 }
00542 
00543 <font class="keywordtype">void</font>
<a name="l00544"></a><a class="code" href="classCRendererManager.html#a15">00544</a> <a class="code" href="classCRendererManager.html#a15">CRendererManager::PerVtxMaterialChanged</a>( RendererProps::tPerVtxMaterial matType )<font class="keyword"></font>
00545 {
00546    <font class="keywordflow">if</font> ( RendererRequirements.<a class="code" href="classCRendererProps.html#m6">PerVtxMaterial</a> != (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>)matType ) {
00547       RendererRequirements.<a class="code" href="classCRendererProps.html#m6">PerVtxMaterial</a> = matType;
00548       RendererReqsHaveChanged = <font class="keyword">true</font>;
00549    }
00550 }
00551 
00552 <font class="keywordtype">void</font>
<a name="l00553"></a><a class="code" href="classCRendererManager.html#a16">00553</a> <a class="code" href="classCRendererManager.html#a16">CRendererManager::ClippingEnabledChanged</a>( <font class="keywordtype">bool</font> enabled )<font class="keyword"></font>
00554 {
00555    <a class="code" href="namespaceRendererProps.html#a20">tClipping</a> clipping = (enabled) ? <a class="code" href="namespaceRendererProps.html#a20a14">kClipped</a> : <a class="code" href="namespaceRendererProps.html#a20a13">kNonClipped</a>;
00556    <font class="keywordflow">if</font> ( RendererRequirements.<a class="code" href="classCRendererProps.html#m7">Clipping</a> != (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>)clipping ) {
00557       RendererRequirements.<a class="code" href="classCRendererProps.html#m7">Clipping</a> = clipping;
00558       RendererReqsHaveChanged = <font class="keyword">true</font>;
00559    }
00560 }
00561 
00562 <font class="keywordtype">void</font>
<a name="l00563"></a><a class="code" href="classCRendererManager.html#a17">00563</a> <a class="code" href="classCRendererManager.html#a17">CRendererManager::CullFaceEnabledChanged</a>( <font class="keywordtype">bool</font> enabled )<font class="keyword"></font>
00564 {
00565    <font class="keywordflow">if</font> ( RendererRequirements.<a class="code" href="classCRendererProps.html#m8">CullFace</a> != enabled ) {
00566       RendererRequirements.<a class="code" href="classCRendererProps.html#m8">CullFace</a> = enabled;
00567       RendererReqsHaveChanged = <font class="keyword">true</font>;
00568    }
00569 }
00570 
00571 <font class="keywordtype">void</font>
<a name="l00572"></a><a class="code" href="classCRendererManager.html#a18">00572</a> <a class="code" href="classCRendererManager.html#a18">CRendererManager::ArrayAccessChanged</a>( RendererProps::tArrayAccess accessType )<font class="keyword"></font>
00573 {
00574    <font class="keywordflow">if</font> ( RendererRequirements.<a class="code" href="classCRendererProps.html#m10">ArrayAccess</a> != (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>)accessType ) {
00575       RendererRequirements.<a class="code" href="classCRendererProps.html#m10">ArrayAccess</a> = accessType;
00576       RendererReqsHaveChanged = <font class="keyword">true</font>;
00577    }
00578 }
00579 
00586 <font class="keywordtype">bool</font>
<a name="l00587"></a><a class="code" href="classCRendererManager.html#a2">00587</a> <a class="code" href="classCRendererManager.html#a2">CRendererManager::UpdateNewRenderer</a>()<font class="keyword"></font>
00588 {
00589    <font class="keywordtype">bool</font> rendererChanged = <font class="keyword">false</font>;
00590 
00591    <font class="keywordflow">if</font> ( RendererReqsHaveChanged ) {
00592       <font class="comment">// do a little fixin' up..</font>
00593       <a class="code" href="classCRendererProps.html">CRendererProps</a> rreqs = RendererRequirements;
00594       <font class="keywordflow">if</font> ( ! rreqs.<a class="code" href="classCRendererProps.html#m1">Lighting</a> ) {
00595          <font class="comment">// don't care about these if there's no light</font>
00596          rreqs.<a class="code" href="classCRendererProps.html#m5">Specular</a> = 0;
00597          rreqs.<a class="code" href="classCRendererProps.html#m9">TwoSidedLighting</a> = 0;
00598       }
00599 
00600       rreqs = (tU64)rreqs &amp; CurUserPrimReqMask;
00601 
00602       <font class="comment">// first check the user renderers</font>
00603 
00604       <font class="keywordtype">int</font> i;
00605       <font class="keywordtype">bool</font> userRendererFound = <font class="keyword">false</font>;
00606 
00607       <font class="keywordflow">for</font> ( i = 0; i &lt; NumUserRenderers; i++ )
00608          <font class="keywordflow">if</font> ( rreqs == (rreqs &amp; UserRenderers[i].<a class="code" href="structtRenderer.html#m0">capabilities</a>)
00609               &amp;&amp; UserRenderers[i].<a class="code" href="structtRenderer.html#m1">requirements</a> == (rreqs &amp; UserRenderers[i].<a class="code" href="structtRenderer.html#m1">requirements</a>) )
00610             <font class="keywordflow">break</font>;
00611 
00612       <font class="comment">// did we find a user renderer?</font>
00613       <font class="keywordflow">if</font> ( i &lt; NumUserRenderers ) {
00614          userRendererFound = <font class="keyword">true</font>;
00615 
00616          NewRenderer = &amp;UserRenderers[i];
00617 
00618          <font class="keywordflow">if</font> (CurrentRenderer != &amp;UserRenderers[i]) {
00619             rendererChanged = <font class="keyword">true</font>;
00620          }       
00621       }
00622 
00623       <font class="comment">// now the default renderers</font>
00624 
00625       <font class="keywordflow">if</font> ( ! userRendererFound ) {
00626          <font class="keywordflow">for</font> ( i = 0; i &lt; NumDefaultRenderers; i++ )
00627             <font class="keywordflow">if</font> ( rreqs == (rreqs &amp; DefaultRenderers[i].<a class="code" href="structtRenderer.html#m0">capabilities</a>)
00628                &amp;&amp; DefaultRenderers[i].<a class="code" href="structtRenderer.html#m1">requirements</a> == (rreqs &amp; DefaultRenderers[i].<a class="code" href="structtRenderer.html#m1">requirements</a>) )
00629                <font class="keywordflow">break</font>;
00630 
00631          mErrorIf( i == NumDefaultRenderers,
00632                    <font class="stringliteral">"Couldn't find a suitable renderer..\n"</font>
00633                    <font class="stringliteral">"state reqs = 0x%08x 0x%08x, mask = %08x %08x\n"</font>,
00634                    (tU32)((tU64)rreqs &gt;&gt; 32),
00635                    (tU32)((tU64)rreqs),
00636                    (tU32)((tU64)CurUserPrimReqMask &gt;&gt; 32),
00637                    (tU32)((tU64)CurUserPrimReqMask)
00638             );
00639 
00640          NewRenderer = &amp;DefaultRenderers[i];
00641 
00642          <font class="keywordflow">if</font> (CurrentRenderer != &amp;DefaultRenderers[i]) {
00643             <font class="comment">// printf("vu1 renderer requirements are 0x%08x, renderer = 0x%08x i = %d\n",</font>
00644             <font class="comment">// (unsigned int)RendererRequirements, (unsigned int)CurrentRenderer-&gt;capabilities, i);</font>
00645             rendererChanged = <font class="keyword">true</font>;
00646          }
00647       }
00648    }
00649 
00650    RendererReqsHaveChanged = <font class="keyword">false</font>;
00651 
00652    <font class="keywordflow">return</font> rendererChanged;
00653 }
00654 
00655 <font class="keywordtype">void</font>
<a name="l00656"></a><a class="code" href="classCRendererManager.html#a3">00656</a> <a class="code" href="classCRendererManager.html#a3">CRendererManager::MakeNewRendererCurrent</a>()<font class="keyword"></font>
00657 {
00658    mAssert( NewRenderer != NULL );
00659    CurrentRenderer = NewRenderer;
00660    NewRenderer = NULL;
00661 }
00662 
00663 <font class="keywordtype">void</font>
<a name="l00664"></a><a class="code" href="classCRendererManager.html#a4">00664</a> <a class="code" href="classCRendererManager.html#a4">CRendererManager::LoadRenderer</a>( CVifSCDmaPacket &amp;packet )<font class="keyword"></font>
00665 {
00666    mAssert( CurrentRenderer != NULL );
00667 
00668 <font class="comment">//     printf("Loading renderer: %s\n", CurrentRenderer-&gt;renderer-&gt;GetName() );</font>
00669 
00670    CurrentRenderer-&gt;<a class="code" href="structtRenderer.html#m2">renderer</a>-&gt;Load();
00671 
00672    <a class="code" href="metrics_8h.html#a12">pglAddToMetric</a>(<a class="code" href="metrics_8h.html#a13a6">kMetricsRendererUpload</a>);
00673 }
00674 
00675 <font class="comment">/********************************************</font>
00676  * ps2gl C api
00677  */
00678 
00735 <font class="keywordtype">void</font>
<a name="l00736"></a><a class="code" href="renderermanager_8cpp.html#a56">00736</a> <a class="code" href="group__custom__renderers__prims__state.html#a4">pglBeginRendererDefs</a>()<font class="keyword"></font>
00737 {
00738    <font class="comment">// does nothing now, but a begin/end pair could come in handy later</font>
00739    <font class="comment">// if I add caches, hashes, etc..</font>
00740 }
00741 
00748 <font class="keywordtype">void</font>
<a name="l00749"></a><a class="code" href="renderermanager_8cpp.html#a57">00749</a> <a class="code" href="ps2gl_8h.html#a57">pglRegisterRenderer</a>( <font class="keywordtype">void</font> *renderer )<font class="keyword"></font>
00750 {
00751    <a class="code" href="classCRenderer.html">CRenderer</a> *newRenderer = reinterpret_cast&lt;CRenderer*&gt;(renderer);
00752    pGLContext-&gt;GetImmGeomManager().GetRendererManager().RegisterUserRenderer( newRenderer );
00753 }
00754 
00758 <font class="keywordtype">void</font>
<a name="l00759"></a><a class="code" href="renderermanager_8cpp.html#a58">00759</a> <a class="code" href="group__custom__renderers__prims__state.html#a6">pglEndRendererDefs</a>()<font class="keyword"></font>
00760 {
00761    <font class="comment">// see comment in begin</font>
00762 }
00763 
00770 <font class="keyword">const</font> <font class="keywordtype">char</font>*
<a name="l00771"></a><a class="code" href="renderermanager_8cpp.html#a55">00771</a> <a class="code" href="group__custom__renderers__prims__state.html#a7">pglGetCurRendererName</a>()<font class="keyword"></font>
00772 {
00773    <font class="keywordflow">return</font> pGLContext-&gt;GetImmGeomManager().GetRendererManager().GetCurRenderer().GetName();
00774 }
00775 
</pre></div><hr><address><small>ps2gl version cvs</small></address>
