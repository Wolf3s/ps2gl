<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PS2SDK: defining custom renderers, primitive types, and state</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PS2SDK
   </div>
   <div id="projectbrief">PS2 Homebrew Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">defining custom renderers, primitive types, and state<div class="ingroups"><a class="el" href="group__pgl__api.html">pgl* API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga78a8e4f5fea3e41b5c27fe6abe0c7577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#ga78a8e4f5fea3e41b5c27fe6abe0c7577">pglRegisterCustomPrimType</a> (GLenum primType, pglU64_t requirements, pglU64_t rendererReqMask, int mergeContiguous)</td></tr>
<tr class="separator:ga78a8e4f5fea3e41b5c27fe6abe0c7577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0a45de877116298f4dfce4d40832543"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#gad0a45de877116298f4dfce4d40832543">pglEnableCustom</a> (pglU64_t flag)</td></tr>
<tr class="separator:gad0a45de877116298f4dfce4d40832543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7085bfd33668cf9c7f277c7a38989694"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#ga7085bfd33668cf9c7f277c7a38989694">pglDisableCustom</a> (pglU64_t flag)</td></tr>
<tr class="separator:ga7085bfd33668cf9c7f277c7a38989694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7856a4e3d8be073e0848bb239a719ae"><td class="memItemLeft" align="right" valign="top"><a id="gad7856a4e3d8be073e0848bb239a719ae"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>pglUserRenderContextChanged</b> ()</td></tr>
<tr class="separator:gad7856a4e3d8be073e0848bb239a719ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab43e3f2b25d74248292fbb63e4e81f5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#gab43e3f2b25d74248292fbb63e4e81f5d">pglBeginRendererDefs</a> ()</td></tr>
<tr class="separator:gab43e3f2b25d74248292fbb63e4e81f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58cba58dc54b2071bd3bc77e5fc69798"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#ga58cba58dc54b2071bd3bc77e5fc69798">pglRegisterRenderer</a> (void *renderer)</td></tr>
<tr class="separator:ga58cba58dc54b2071bd3bc77e5fc69798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76ce91f0f43261d482ebf45aeb664216"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#ga76ce91f0f43261d482ebf45aeb664216">pglEndRendererDefs</a> ()</td></tr>
<tr class="separator:ga76ce91f0f43261d482ebf45aeb664216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61cda037a935cc0ae27397f5f936f0b3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__custom__renderers__prims__state.html#ga61cda037a935cc0ae27397f5f936f0b3">pglGetCurRendererName</a> ()</td></tr>
<tr class="separator:ga61cda037a935cc0ae27397f5f936f0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>API to define custom primitive types, state chagnes, renderers, or override the default renderers.</p>
<p>The ps2gl code that runs on the ee core is just a large, ugly state machine &ndash; all of the "real" work is done in the renderers. There are currently a dozen or so internal renderers which handle different types of geometry, lighting, texturing, etc. Most of the internal renderers implement some case that none of the others can do, but a few are specializations of more general renderers that implement a commonly encountered case more efficiently that the general renderer can. Using the functions described below, an application can define custom renderers or override existing ones.</p>
<p>But first, an explanation of how ps2gl chooses renderers is necessary. ps2gl keeps a bitfield of capabilities that a renderer must provide to be chosen to render. This bitfield is called the "renderer requirements" and describes things like lighting, texturing, prim type, shading type, etc. Each renderer also keeps a corresponding bitfield describing the capabilities that it provides, called its "capabilities." Each bit means that the corresponding capability is required (or provided, in the case of a renderer). Consider the "lighting" bit. This bit is set when glEnable( GL_LIGHTING ) is called and changes the renderer requirements, causing ps2gl to look for a new renderer the next time geometry is rendered. Each renderer's capabilities will be compared to the current renderer requirements, and the first renderer that meets all the requirements is chosen. In this example, only a renderer that can do lit geometry will be selected.</p>
<p>Renderers are searched in the order they were registered, application-defined renderers first. This means that specialized renderers should be registered before general ones. It also means that to override a default renderer, an application need only register a renderer that provides the same capabilites (or a subset).</p>
<p>Implementing a custom renderer whose purpose is not to override a built-in renderer implies defining custom prim types and/or properties, for which the upper 32 bits of the renderer capabilities/requirements are reserved. See the function documentation below for more details.</p>
<p>For more information on implementing a renderer, see the file "renderer.h" which defines the <a class="el" href="class_c_renderer.html">CRenderer</a> interface. (Sorry, but the renderer needs to be a cpp class.) The best examples are the default renderers, so take a look at linear_renderer.* and base_renderer.*. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab43e3f2b25d74248292fbb63e4e81f5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab43e3f2b25d74248292fbb63e4e81f5d">&#9670;&nbsp;</a></span>pglBeginRendererDefs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglBeginRendererDefs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this before registering any renderers. </p>

</div>
</div>
<a id="ga7085bfd33668cf9c7f277c7a38989694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7085bfd33668cf9c7f277c7a38989694">&#9670;&nbsp;</a></span>pglDisableCustom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglDisableCustom </td>
          <td>(</td>
          <td class="paramtype">pglU64_t&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable a custom attribute/state change. Call this to disable the corresponding bit(s) in the renderer requirements bitfield. The lower 32 bits should be zero. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>the bit(s) to disable (lower 32 should be zero). This is the same constant passed to pglEnableCustom. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad0a45de877116298f4dfce4d40832543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad0a45de877116298f4dfce4d40832543">&#9670;&nbsp;</a></span>pglEnableCustom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglEnableCustom </td>
          <td>(</td>
          <td class="paramtype">pglU64_t&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable a custom attribute/state change. Call this to enable the corresponding bit(s) in the renderer requirements bitfield (see above). The lower 32 bits should be zero. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>the bit(s) to enable (lower 32 should be zero) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga76ce91f0f43261d482ebf45aeb664216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76ce91f0f43261d482ebf45aeb664216">&#9670;&nbsp;</a></span>pglEndRendererDefs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglEndRendererDefs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this after registering custom renderers. </p>

</div>
</div>
<a id="ga61cda037a935cc0ae27397f5f936f0b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61cda037a935cc0ae27397f5f936f0b3">&#9670;&nbsp;</a></span>pglGetCurRendererName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* pglGetCurRendererName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the name (string) of the current renderer. You'll need to call <a class="el" href="group__gl__api.html#ga9053f66d0dd41aa89e3f7ab19f4840bd">glFlush()</a> to be sure that the renderer is in in sync. Probably doesn't make much sense to call this inside of a glBegin/glEnd pair. </p><dl class="section return"><dt>Returns</dt><dd>pointer to the renderer's name </dd></dl>

</div>
</div>
<a id="ga78a8e4f5fea3e41b5c27fe6abe0c7577"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78a8e4f5fea3e41b5c27fe6abe0c7577">&#9670;&nbsp;</a></span>pglRegisterCustomPrimType()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglRegisterCustomPrimType </td>
          <td>(</td>
          <td class="paramtype">GLenum&#160;</td>
          <td class="paramname"><em>primType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pglU64_t&#160;</td>
          <td class="paramname"><em>requirements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pglU64_t&#160;</td>
          <td class="paramname"><em>rendererReqMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mergeContiguous</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a new primitive. After registering a primitive with this call it can be used anywhere a normal primitive can be used (glBegin, glDrawArrays, etc.). Defining a new primitive usually implies writing a renderer to go along with it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">primType</td><td>bit 31 must be set (this indicates a user prim to ps2gl). The lower 31 bits should be a number from 0 to PGL_MAX_CUSTOM_PRIM_TYPES. </td></tr>
    <tr><td class="paramname">requirements</td><td>gives the bit flags to be set in the renderer requirements bitfield (see the documentation for custom renderers). Usually this will be one bit indicating the prim type used to select a renderer. </td></tr>
    <tr><td class="paramname">rendererReqMask</td><td>a mask to be applied to the renderer requirements bitfield before testing against renderer capabilities. This could be used, for example, to mask off the default lower 32 bits if they are irrelevent to this custom primitive type. </td></tr>
    <tr><td class="paramname">mergeContiguous</td><td>rather calling a renderer with every block of geometry that is specified (with glBegin/End, DrawArrays, etc.), ps2gl tries to combine multiple blocks into a single call to the renderer. This flag tells ps2gl whether it can treat blocks of geometry that were specified independently but are contiguous in memory as a single block. (State changes will of course force them to be treated separately.) This is done, for example, with points, lines, triangles, and quads, but not with strips, since merging would lose the strip boundaries. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga58cba58dc54b2071bd3bc77e5fc69798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58cba58dc54b2071bd3bc77e5fc69798">&#9670;&nbsp;</a></span>pglRegisterRenderer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pglRegisterRenderer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>renderer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a custom renderer. The maximum number of custom renderers is indicated by PGL_MAX_CUSTOM_RENDERERS. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">renderer</td><td>should point to a <a class="el" href="class_c_renderer.html">CRenderer</a> object (passed as a void* for compatibility with C code) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
